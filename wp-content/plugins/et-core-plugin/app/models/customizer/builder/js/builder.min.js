var etThemeBuilder,options_old={},etPreImport={};!function(l){"use strict";etThemeBuilder={init:function(){this.etGlobal.et_init(),this.etPresets.et_set_presets(),this.etPresets.et_init(),this.etMultipleTemplates.et_init()},etGlobal:{et_init:function(){this.et_show_builder(),this.et_collapse_builder(),this.et_edit(),this.et_add_options_devices(),this.et_change_device(),this.et_switch_default_header(),this.et_switch_default_single_product(),this.et_reset_header_builder_settings()},et_show_builder:function(){wp.customize.panel("header-builder")&&(wp.customize.panel("header-builder").expanded.bind(function(e){l(".et_customizer-builder-header").hasClass("loaded")?etThemeBuilder.etHeader.et_close():l(".et_customizer-builder-header").length?(etThemeBuilder.etHeader.et_show(),etThemeBuilder.etHeader.et_force_resize(),etThemeBuilder.etHeader.et_resizable()):etThemeBuilder.etGlobal.et_load_builder("header")}),l(document).on("click",".customize-panel-back",function(e){etThemeBuilder.etHeader.et_close()})),wp.customize.panel("single_product_builder")&&(wp.customize.panel("single_product_builder").expanded.bind(function(e){l(".et_customizer-builder-single_product").hasClass("loaded")?etThemeBuilder.etSections.et_close(l(".et_customizer-builder-single_product")):l(".et_customizer-builder-single_product").length?etThemeBuilder.etSections.et_show(l(".et_customizer-builder-single_product")):etThemeBuilder.etGlobal.et_load_builder("product-single")}),l(document).on("click",".customize-panel-back",function(e){etThemeBuilder.etSections.et_close(l(".et_customizer-builder-single_product"))}))},et_load_builder:function(t){l.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_template",template:t},dataType:"html",success:function(e){l(".wp-full-overlay").append(e),"header"==t?(etThemeBuilder.etHeader.et_show(),etThemeBuilder.etHeader.et_init()):"product-single"==t?(etThemeBuilder.etSections.et_show(l(".et_customizer-builder-single_product")),etThemeBuilder.etSections.et_init(".et_customizer-builder-single_product",{sticky:!0})):"product-archive"==t&&(etThemeBuilder.etSections.et_show(l(".et_customizer-builder-archive_product")),etThemeBuilder.etSections.et_init(".et_customizer-builder-archive_product",{sticky:!0}))},error:function(e){etThemeBuilder.etGlobal.et_notice("load-builder","error")},complete:function(){}})},et_add_options_devices:function(){wp.customize.section.each(function(i){"kirki-lazy"!==i.params.type&&i.expanded.bind(function(){var t,e="#accordion-section-"+i.id;l(e).is(".et_device-added")||(l(e).addClass("et_device-added"),t=l("#customize-footer-actions .devices-wrapper").html(),e="#"+l(e).attr("aria-owns"),l.each(l(e).find("li[id*=_et-mobile], li[id*=_et-tablet], li[id*=_et-desktop]"),function(){var e=l(this).attr("id");e=(e=(e=e.replace("_et-mobile","")).replace("_et-tablet","")).replace("_et-desktop",""),1<l("li[id*="+e+"_et]").length&&l(this).addClass("multi-device").prepend(t)})),"mobile_panel"==i.id&&l(".devices-wrapper .preview-mobile").trigger("click")})})},et_add_options_devices_test:function(){wp.customize.section.each(function(i){i.expanded.bind(function(){var t,e="#accordion-section-"+i.id;l(e).is(".et_device-added")||(l(e).addClass("et_device-added"),t=l("#customize-footer-actions .devices-wrapper").html(),e="#"+l(e).attr("aria-owns"),l.each(l(e).find("li[id*=_et-mobile], li[id*=_et-tablet], li[id*=_et-desktop]"),function(){var e=l(this).attr("id");e=(e=(e=e.replace("_et-mobile","")).replace("_et-tablet","")).replace("_et-desktop",""),1<l("li[id*="+e+"_et]").length&&l(this).addClass("multi-device").prepend(t)})),"mobile_panel"==i.id&&l(".devices-wrapper .preview-mobile").trigger("click")})})},et_change_device:function(){l(document).on("click",".devices-wrapper button",function(){l(this).hasClass("preview-desktop")?(l(".et_customizer-builder-header .et_desktop-mod").removeClass("hidden"),l(".et_customizer-builder-header .et_mobile-mod").addClass("hidden")):(l(".et_customizer-builder-header .et_desktop-mod").addClass("hidden"),l(".et_customizer-builder-header .et_mobile-mod").removeClass("hidden")),l(".et_headers-multiple").addClass("hidden"),etThemeBuilder.etHeader.et_force_resize(),wp.customize.previewer.refresh()}),l(document).on("click",".et_button.desktop, .et_button.mobile",function(e){var t=l(this).data("device");l(".devices-wrapper .preview-"+t).trigger("click"),l(".et_button.desktop, .et_button.mobile").removeClass("inactive"),l(this).hasClass("desktop")?(l(".et_customizer-builder-header .et_desktop-mod").removeClass("hidden"),l(".et_customizer-builder-header .et_mobile-mod").addClass("hidden")):(l(".et_customizer-builder-header .et_desktop-mod").addClass("hidden"),l(".et_customizer-builder-header .et_mobile-mod").removeClass("hidden")),l(".et_headers-multiple").addClass("hidden"),l(".et_call-multiple-headers").removeClass("active"),etThemeBuilder.etHeader.et_force_resize(),wp.customize.previewer.refresh()}),l(document).on("click",".customize-control .devices button",function(e){var t=l(this).data("device");l(".devices-wrapper .preview-"+t).trigger("click"),wp.customize.previewer.refresh()})},et_generate_random:function(e){var t="",i="23456789ABCDEFHJKLMNPRTVWXYZabcdefghijklmnopqrstuvwxyz";e=e||5;for(var a=0;a<e;a++)t+=i.charAt(Math.floor(Math.random()*i.length));return t},et_collapse_builder:function(){l(document).on("click",".et_collapse-builder",function(e){e.preventDefault();e=l(this).attr("data-panel");l(".et_customizer-builder-"+e).hasClass("collapsed")?l(".et_customizer-builder-"+e).removeClass("collapsed"):l(".et_customizer-builder-"+e).addClass("collapsed")})},et_edit:function(){l(document).on("click",".et_edit",function(e){e.preventDefault(),"connect_block_package"!=l(this).attr("data-section")?0<=l(this).attr("data-section").toLowerCase().indexOf("sidebar-widgets")?wp.customize.panel("widgets").focus():(e=l(this).attr("data-parent"),wp.customize.section(e).focus(),l(this).is("[data-option]")&&(e=l(this).attr("data-option"),l("#customize-controls .wp-full-overlay-sidebar-content").animate({scrollTop:l(e).offset().top},1e3))):etThemeBuilder.etConnectBlock.et_popup(l(this))})},et_range_fields:function(e){var e=jQuery(e),t=jQuery(e).find('input[type="range"]'),i=jQuery(e).find('input[type="text"]');jQuery(e).data("default");t.on("mousemove change",function(){i.attr("value",t.val())}),i.on("input paste change",function(){t.attr("value",i.val())})},et_switch_default_header:function(){l(document).on("click","#etheme-disable-default-header",function(){var e=l(this).is(":checked");l(this).attr("checked",e),l(this).checked=e,setTimeout(function(e,t){return confirm("Are you sure ?")?void l.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_switch_default",type:"header_builder",value:t},success:function(e){location.reload()},error:function(e){etThemeBuilder.etGlobal.et_notice("switch-header","error")}}):(l(e).attr("checked",!t),void(l(e).checked=!t))},350,l(this),e)})},et_switch_default_single_product:function(){l(document).on("click","#etheme-disable-default-single-product",function(){var e=l(this).is(":checked");l(this).attr("checked",e),l(this).checked=e,setTimeout(function(e,t){return confirm("Are you sure ?")?void l.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_switch_default",type:"single_product_builder",value:t},success:function(e){location.reload()},error:function(e){etThemeBuilder.etGlobal.et_notice("switch-single-product","error")}}):(l(e).attr("checked",!t),void(l(e).checked=!t))},350,l(this),e)})},et_reset_header_builder_settings:function(){l(document).on("click","#etheme-reset-header-builder",function(){confirm("Are you sure ? This will remove all your prebuild elements.")&&l.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_get_presets",preset:"clear"},dataType:"json",success:function(e){var t=l(".et_customizer-builder").attr("class"),i=encodeURI(e.connect_block_package);wp.customize.control("header_top_elements").setting.set(e.header_top_elements),wp.customize.control("header_main_elements").setting.set(e.header_main_elements),wp.customize.control("header_bottom_elements").setting.set(e.header_bottom_elements),wp.customize.control("connect_block_package").setting.set(i),i=encodeURI(e.connect_block_mobile_package),wp.customize.control("header_mobile_top_elements").setting.set(e.header_mobile_top_elements),wp.customize.control("header_mobile_main_elements").setting.set(e.header_mobile_main_elements),wp.customize.control("header_mobile_bottom_elements").setting.set(e.header_mobile_bottom_elements),wp.customize.control("connect_block_mobile_package").setting.set(i),l(".et_customizer-builder").html(e.template),l(".et_customizer-builder").attr("class",t),etThemeBuilder.etHeader.et_sortable(),etThemeBuilder.etHeader.et_resizable(),l(".et_customizer-builder").prepend('<div class="et-message et-warning" style="margin:0 -15px;">Please, save your changes and reload your page after you have chosen your template.</div>'),setTimeout(function(){l(".et_customizer-builder").find("> .et-message").fadeOut()},2e4)},error:function(e){etThemeBuilder.etGlobal.et_notice("reset-header-builder","error")},complete:function(){}})})},et_get_notice:function(e){var t=l("#etheme_ajax-notices").html();return(t=JSON.parse(t))[e]},et_notice:function(e,t,i){i=i||"";var a=etThemeBuilder.etGlobal.et_get_notice(e);switch(t){case"error":console.error(a+i);break;case"warning":console.warn(a+i);break;case"log":console.log(a+i);break;case"alert":alert(a+i);break;default:console.log(a+i)}},et_panel_resize:function(e){var i=l(e).get(0),e=l(e+" .et_panel-resizer").get(0),a=250,o=0,n=0,r=0;function t(e){l("#customize-preview").addClass("et_no-events");var t=o-(e.pageY-r);a<t&&(i.style.height=t+"px",i.style.top=n+(e.pageY-r)+"px")}function s(){l("#customize-preview").removeClass("et_no-events"),window.removeEventListener("mousemove",t)}e.addEventListener("mousedown",function(e){e.preventDefault(),o=parseFloat(getComputedStyle(i,null).getPropertyValue("height").replace("px","")),n=i.getBoundingClientRect().top,r=e.pageY,window.addEventListener("mousemove",t),window.addEventListener("mouseup",s)})}},etMultipleTemplates:{et_init:function(){this.et_show(),this.et_multiples_actions(),this.et_conditions_actions(),this.et_save_multiple_in_bar()},et_save_multiple_in_bar:function(){l(document).on("click",".et_save-multiple-in-bar",function(e){e.preventDefault(),l(".et_header-save:not(.hidden)").trigger("click")})},et_show:function(){l(document).on("click",[".et_call-multiple-headers",".et_call-multiple-single-products"].join(","),function(e){e.preventDefault();var t,i,a,o,n=l(this),e="";n.addClass("et_no-events"),n.hasClass("et_call-multiple-headers")?(t=".et_headers-multiple",i=".et_headers-multiple-headers .et_headers-multiple-content",a=l(".et_customizer-builder-header"),e="header",o=l("#sub-accordion-panel-header-builder li").not(".cannot-expand")):n.hasClass("et_call-multiple-single-products")&&(t=".et_product-single-multiple",i=".et_product-single-multiple-products .et_product-single-multiple-content",a=l(".et_customizer-builder-single_product"),e="single-product",o=l("#sub-accordion-panel-single_product_builder li").not(".customize-info")),t&&i&&a&&e||etThemeBuilder.etGlobal.et_notice("wrong-multiple-section","error"),l(".et_button.mobile, .et_button.desktop").addClass("inactive"),n.addClass("active"),l(t).length?(n.removeClass("et_no-events"),l(t).removeClass("hidden")):etThemeBuilder.etMultipleTemplates.et_load_multiple(e,t,a,i,function(){n.removeClass("et_no-events")}),a.find(".et_button.show-builder").removeClass("hidden"),a.find(".et_button.show-builder").on("click",function(e){l(a).find(".et_button.show-builder").addClass("hidden"),l(t).addClass("hidden")}),n.hasClass("et-ajax-option")||(l.each(o,function(e,t){var i=(i=l(t).attr("id")).replace("accordion-section-","");l(t).hasClass("control-section-kirki-lazy")&&(l("#"+(i="sub-accordion-section-"+i)).hasClass("et-customizer-section-loaded")||l("#"+i).addClass("et-customizer-section-loaded").trigger("et-customizer-section-opened"))}),etThemeBuilder.etMultipleTemplates.et_get_ajax_options(),n.addClass("et-ajax-option"))})},et_load_multiple:function(t,i,a,o,e){l.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_template",template:"multiple-section",builder:t},dataType:"html",success:function(e){l(i).remove(),a.find(".et_header-head").after(e),l(i).removeClass("hidden"),l(o).find("ul li").length||etThemeBuilder.etMultipleTemplates.et_create_default_template(t,o),l(".et_header-action.et_header-outdoor-action.disabled").removeClass("disabled")},error:function(e){etThemeBuilder.etGlobal.et_notice("load-multiple","error")},complete:function(){l(i).removeClass("hidden"),e()}})},et_create_default_template:function(e,t){var i=etThemeBuilder.etMultipleTemplates.et_get_options(!0,"save");l.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_multiple",type:"add",header:"Default",options:i,builder:e},dataType:"json",success:function(e){l(t).html(e.headers)},error:function(e){etThemeBuilder.etGlobal.et_notice("default-multiple-template","error")},complete:function(){}})},et_get_ajax_options:function(){var e=l(".et_customizer-builder.loaded").find(".et_options-data").html(),e=JSON.parse(e);l(".wp-customizer").addClass("et-preload"),l.ajax({url:ajaxurl,method:"POST",async:!1,data:{action:"et_ajax_multiple",type:"get_option",builder:"",options_list:e},dataType:"json",success:function(e){etThemeBuilder.etMultipleTemplates.et_create_ajax_options(e)},error:function(){}})},et_create_ajax_options:function(e){l.when(_.each(e.controls,function(e,t){1!=wp.customize.section(t).loaded&&(wp.customize.section(t).addControl(e),etThemeBuilder.etGlobal.et_add_options_devices_test())})),l(".wp-customizer").removeClass("et-preload")},et_get_options:function(i,a){var o={},e=l(".et_customizer-builder.loaded"),t=e.find(".et_options-data").html(),t=JSON.parse(t);e.hasClass("et_customizer-builder-header")?i?(o.header_top_elements=btoa(wp.customize.control("header_top_elements").setting.get()),o.header_main_elements=btoa(wp.customize.control("header_main_elements").setting.get()),o.header_bottom_elements=btoa(wp.customize.control("header_bottom_elements").setting.get()),o.connect_block_package=btoa(decodeURI(wp.customize.control("connect_block_package").setting.get())),o.header_mobile_top_elements=btoa(wp.customize.control("header_mobile_top_elements").setting.get()),o.header_mobile_main_elements=btoa(wp.customize.control("header_mobile_main_elements").setting.get()),o.header_mobile_bottom_elements=btoa(wp.customize.control("header_mobile_bottom_elements").setting.get()),o.connect_block_mobile_package=btoa(decodeURI(wp.customize.control("connect_block_mobile_package").setting.get()))):(o.header_top_elements=wp.customize.control("header_top_elements").setting.get(),o.header_main_elements=wp.customize.control("header_main_elements").setting.get(),o.header_bottom_elements=wp.customize.control("header_bottom_elements").setting.get(),o.connect_block_package=decodeURI(wp.customize.control("connect_block_package").setting.get()),o.header_mobile_top_elements=wp.customize.control("header_mobile_top_elements").setting.get(),o.header_mobile_main_elements=wp.customize.control("header_mobile_main_elements").setting.get(),o.header_mobile_bottom_elements=wp.customize.control("header_mobile_bottom_elements").setting.get(),o.connect_block_mobile_package=decodeURI(wp.customize.control("connect_block_mobile_package").setting.get())):e.hasClass("et_customizer-builder-single_product")&&(i?(o.product_single_elements=btoa(wp.customize.control("product_single_elements").setting.get()),o.connect_block_product_single_package=btoa(decodeURI(wp.customize.control("connect_block_product_single_package").setting.get()))):(o.product_single_elements=wp.customize.control("product_single_elements").setting.get(),o.connect_block_product_single_package=decodeURI(wp.customize.control("connect_block_product_single_package").setting.get())));var n=["html_block3","html_block2","html_block1"];return l.each(t,function(e,t){wp.customize.control(t)&&("save"==a&&-1<n.indexOf(t)&&i?o[t]=btoa(etThemeBuilder.etMultipleTemplates.utf8_encode(wp.customize.control(t).setting.get())):o[t]=wp.customize.control(t).setting.get())}),o},utf8_encode:function(e){if(null==e)return"";for(var t,i=e+"",a="",o=t=0,n=i.length,r=0;r<n;r++){var s=i.charCodeAt(r),d=null;if(s<128)t++;else if(127<s&&s<2048)d=String.fromCharCode(s>>6|192,63&s|128);else if(55296!=(63488&s))d=String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128);else{if(55296!=(64512&s))throw new RangeError("Unmatched trail surrogate at "+r);var l=i.charCodeAt(++r);if(56320!=(64512&l))throw new RangeError("Unmatched lead surrogate at "+(r-1));s=((1023&s)<<10)+(1023&l)+65536,d=String.fromCharCode(s>>18|240,s>>12&63|128,s>>6&63|128,63&s|128)}null!==d&&(o<t&&(a+=i.slice(o,t)),a+=d,o=t=r+1)}return o<t&&(a+=i.slice(o,n)),a},et_render_options:function(e){l.each(e,function(i,a){if(wp.customize.control(i)){"connect_block_package"!=i&&"connect_block_mobile_package"!=i&&"connect_block_product_single_package"!=i||wp.customize.control(i).setting.set(a);var e,t=wp.customize.settings.controls[i];switch(void 0===t&&((t=wp.customize.control(i)).type=t.params.type),t.type){case"kirki-box-model":l.each(a,function(e,t){wp.customize.control(i).container.find('[data-target-option="'+e+'"]').attr("value",t).trigger("change")});break;case"repeater":wp.customize.control(i).setting.set(a);break;case"kirki-sortable":l.each(wp.customize.control(i).container.find(".kirki-sortable-item"),function(e,t){-1<a.indexOf(t)||wp.customize.control(i).container.find('[data-value="'+l(this).data("value")+'"]').addClass("invisible").find("i.visibility").addClass("dashicons-visibility-faint").trigger("change")}),""!=a&&l.each(a,function(e,t){wp.customize.control(i).container.find('[data-value="'+t+'"]').removeClass("invisible").find("i.visibility").removeClass("dashicons-visibility-faint").trigger("change")}),wp.customize.control(i).setting.set(a);break;case"kirki-toggle":a=1===a||"1"===a||"true"===a||!0===a,wp.customize.control(i).setting.set(a);break;case"kirki-radio-image":wp.customize.control(i).setting.set(a),wp.customize.control(i).container.find('input[value="'+a+'"]').prop("checked",!0).trigger("change");break;case"kirki-typography":a["font-family"]&&(a["font-family"]=a["font-family"].replace("\\",""),a["font-family"]=a["font-family"].replace("\\","")),wp.customize.control(i).setting.set(a);var o=wp.customize.control(i).section();wp.customize.section(o).container.hasClass("et_binded")||wp.customize.section(o).expanded.bind(function(){var e=wp.customize.control(i).setting.get();wp.customize.control(i).container.find(".font-family select").val(e["font-family"]).trigger("change"),wp.customize.control(i).container.find(".variant select").val(e.variant).trigger("change"),wp.customize.control(i).container.find(".text-transform select").val(e["text-transform"]).trigger("change"),wp.customize.control(i).container.find(".font-size input").attr("value",e["font-size"]).trigger("change"),wp.customize.control(i).container.find(".letter-spacing input").attr("value",e["letter-spacing"]).trigger("change"),wp.customize.control(i).container.find(".line-height input").attr("value",e["line-height"]).trigger("change"),wp.customize.section(o).container.addClass("et_binded")}),wp.customize.control(i).container.find(".font-family select").val(a["font-family"]).trigger("change"),wp.customize.control(i).container.find(".variant select").val(a.variant).trigger("change"),wp.customize.control(i).container.find(".text-transform select").val(a["text-transform"]).trigger("change"),wp.customize.control(i).container.find(".font-size input").attr("value",a["font-size"]).trigger("change"),wp.customize.control(i).container.find(".letter-spacing input").attr("value",a["letter-spacing"]).trigger("change"),wp.customize.control(i).container.find(".line-height input").attr("value",a["line-height"]).trigger("change");break;case"kirki-background":wp.customize.control(i).setting.set(a),wp.customize.control(i).container.find(".kirki-color-control").wpColorPicker("color",a["background-color"]),wp.customize.control(i).container.find(".background-repeat select").val(a["background-repeat"]).trigger("change"),wp.customize.control(i).container.find(".background-position select").val(a["background-position"]).trigger("change"),wp.customize.control(i).container.find('.background-size input[value="'+a["background-size"]+'"]').prop("checked",!0).trigger("change"),wp.customize.control(i).container.find('.background-attachment input[value="'+a["background-attachment"]+'"]').prop("checked",!0).trigger("change"),a["background-image"]?(wp.customize.control(i).container.find(".thumbnail-image").length?wp.customize.control(i).container.find(".thumbnail-image img").attr("src",a["background-image"]):(e='<div class="thumbnail thumbnail-image"><img src="'+a["background-image"]+'" alt=""></div>',wp.customize.control(i).container.find(".attachment-media-view").prepend(e),wp.customize.control(i).container.find(".placeholder").remove()),wp.customize.control(i).container.find(".background-image-upload-remove-button").removeClass("hidden").css("display","inline-block"),wp.customize.control(i).container.find(".background-repeat").css("display","block"),wp.customize.control(i).container.find(".background-position").css("display","block"),wp.customize.control(i).container.find(".background-size").css("display","block"),wp.customize.control(i).container.find(".background-attachment").css("display","block")):(wp.customize.control(i).container.find(".thumbnail-image, .placeholder").remove(),wp.customize.control(i).container.find(".attachment-media-view").prepend('<div class="placeholder">No file selected</div>'),wp.customize.control(i).container.find(".background-image-upload-remove-button").addClass("hidden").css("display","none"),wp.customize.control(i).container.find(".background-repeat").css("display","none"),wp.customize.control(i).container.find(".background-position").css("display","none"),wp.customize.control(i).container.find(".background-size").css("display","none"),wp.customize.control(i).container.find(".background-attachment").css("display","none"));break;case"kirki-wcag-tc":wp.customize.control(i).container.find(".tabs button").removeClass("active"),wp.customize.control(i).container.find('.tabs button[data-mode="custom"]').addClass("active"),wp.customize.control(i).container.find(".kirki-a11y-text-colorpicker-wrapper").hide(),wp.customize.control(i).container.find('.kirki-a11y-text-colorpicker-wrapper[data-id="custom"]').show(),wp.customize.control(i).container.find(".kirki-color-control").wpColorPicker("color",a),wp.customize.control(i).setting.set(a);break;case"kirki-color":wp.customize.control(i).setting.set(a),wp.customize.control(i).container.find(".kirki-color-control").wpColorPicker("color",a);break;case"kirki-generic":wp.customize.control(i).setting.set(a),wp.customize.control(i).container.find("input").attr("value",a);break;default:-1<["menu_item_dots_separator_et-desktop","menu_2_item_dots_separator_et-desktop","contacts_separator_type_et-desktop"].indexOf(i)&&(a="\\"+(a=a.replace(/\\/g,""))),wp.customize.control(i).setting.set(a)}}}),setTimeout(function(){l(".wp-customizer").removeClass("et-preload")},300)},et_publish_btn:function(e,t){var i="";"single-product"==t?i=l(".customize-pane-parent .accordion-section:not(#accordion-panel-woocommerce) h3"):"header"==t&&(i=l(".customize-pane-parent .accordion-section:not(#accordion-panel-header-builder) h3"));var a=l("#customize-save-button-wrapper input"),o=l("#publish-settings"),n='<input type="submit" name="et_save-multiple-in-bar" class="button button-primary save has-next-sibling et_save-multiple-in-bar" value="'+etThemeBuilder.etGlobal.et_get_notice("save-text")+'">';"disable"==e?(l("#customize-save-button-wrapper").addClass("et_save-multiple loading "+t),o.addClass("hidden"),a.addClass("hidden"),a.addClass("disabled"),a.css({"pointer-events":"none"}),a.after(n),i.css({color:"rgba(34, 34, 34, 0.22)","pointer-events":"none","background-color":"transparent"}),i.parent().css({cursor:"not-allowed"})):(l("#customize-save-button-wrapper").removeClass("et_save-multiple loading "+t),l(".et_save-multiple-in-bar").remove(),o.removeClass("hidden"),a.removeClass("hidden"),a.removeClass("disabled"),a.css({"pointer-events":"all"}),i.css({color:"#222","pointer-events":"all","background-color":"transparent"}),i.parent().css({cursor:"pointer"}))},et_multiples_actions:function(){l(document).on("click",".et_call-new-header",function(e){l(".et_new-multiple-holder").hasClass("hidden")?l(".et_new-multiple-holder").removeClass("hidden"):l(".et_new-multiple-holder").addClass("hidden")}),l(document).on("click",".et_header-action",function(e){if(e.preventDefault(),!l(this).hasClass("disabled")){var t=l(this),i=t.attr("data-action"),a="",o={},e=t.parents("li"),n=l(".et_customizer-builder.loaded"),r="header",s=".et_headers-multiple-content",d=".et_headers-multiple-conditions .et_conditions";if(n.hasClass("et_customizer-builder-header")?(s=".et_headers-multiple-headers .et_headers-multiple-content",d=".et_headers-multiple-conditions .et_conditions",r="header"):n.hasClass("et_customizer-builder-single_product")&&(s=".et_product-single-multiple-products .et_product-single-multiple-content",d=".et_product-single-multiple .et_conditions",r="single-product"),"add"==i?(a=n.find(".et_add-new-multiple").val(),options_old=etThemeBuilder.etMultipleTemplates.et_get_options(!0)):a=(t.hasClass("et_header-outdoor-action")?t:e).attr("data-header"),a){if("save"==i||"add"==i)o=etThemeBuilder.etMultipleTemplates.et_get_options(!0,"save"),l(".et_condition-action.et_condition-add").addClass("hidden"),l(".et_conditions-notice.header-notice").removeClass("hidden"),n.removeClass("et_editing-global"),l(".multiple-header-name").attr("data-name",null),"save"==i&&t.addClass("saving"),l(".wp-customizer").addClass("et-preload");else{if("edit"==i)return n.addClass("et_editing-global"),l(".multiple-header-name").attr("data-name",e.find(".et_header-title b").text()),e.addClass("editing"),e.find(".et_header-save").removeClass("hidden"),e.find(".et_header-edit").addClass("hidden"),l(".wp-customizer").addClass("et-preload"),etThemeBuilder.etMultipleTemplates.et_publish_btn("disable",r),options_old=etThemeBuilder.etMultipleTemplates.et_get_options(!0,"save"),void l.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_multiple",type:"old",header:a,options:options_old,builder:r},dataType:"json",success:function(e){etThemeBuilder.etMultipleTemplates.et_multiples_ajax_action(i,a,o,n,r,s,d)},error:function(e){etThemeBuilder.etGlobal.et_notice("save-active-template-options","error")},complete:function(){}});if("remove"==i){if(!confirm("Are you sure? You will not be able to revert it back"))return;l(".et_conditions").html(""),l(".et_condition-action.et_condition-add").addClass("hidden"),l(".et_conditions-notice.header-notice").removeClass("hidden"),n.removeClass("et_editing-global"),l(".multiple-header-name").attr("data-name",null)}else"copy_default"==i?(o=etThemeBuilder.etMultipleTemplates.et_get_options(!0,"save"),n.addClass("et_editing-global")):"copy"==i&&n.addClass("et_editing-global")}"save-name"==i&&e.addClass("et_li-processing"),"edit-name"==i?(e.find(".et_title-editor").removeClass("hidden"),e.find(".et_header-title b").addClass("hidden"),e.find(".et_header-edit-name").addClass("hidden"),e.find(".et_header-save-name").removeClass("hidden")):etThemeBuilder.etMultipleTemplates.et_multiples_ajax_action(i,a,o,n,r,s,d)}else etThemeBuilder.etGlobal.et_notice("name-your-template","alert")}})},et_multiples_ajax_action:function(i,a,e,o,n,r,s){var t="";"save-name"==i&&(t=l('[data-header="'+a+'"] .et_title-editor').val()),l.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_multiple",type:i,header:a,options:e,builder:n,title:t},dataType:"json",success:function(e){var t;"save"==i?("header"==n?(o.find(".et_mobile-mod").html(l(e.builder).find(".et_mobile-mod").html()),o.find(".et_desktop-mod").html(l(e.builder).find(".et_desktop-mod").html()),etThemeBuilder.etHeader.et_sortable(),etThemeBuilder.etHeader.et_resizable()):"single-product"==n&&(o.find(".et_product-single-wrapper").html(l(e.builder).find(".et_product-single-wrapper").html()),etThemeBuilder.etSections.et_sortable(".et_customizer-builder-single_product")),etThemeBuilder.etMultipleTemplates.et_render_options(e.options),etThemeBuilder.etMultipleTemplates.et_conditions_save_all(a),etThemeBuilder.etMultipleTemplates.et_publish_btn("enable",n),l(s).html("")):l(r).html(e.headers),"edit"==i&&(l(s).html(e.conditions),l('[data-header="'+a+'"]').addClass("editing"),o.addClass("et_editing-global"),l('[data-header="'+a+'"] .et_header-save').removeClass("hidden"),l('[data-header="'+a+'"] .et_header-edit').addClass("hidden"),etThemeBuilder.etMultipleTemplates.et_render_options(e.options),l("#customize-save-button-wrapper").removeClass("loading"),t=o.attr("class"),"header"==n?(o.find(".et_mobile-mod").html(l(e.builder).find(".et_mobile-mod").html()),o.find(".et_desktop-mod").html(l(e.builder).find(".et_desktop-mod").html()),o.attr("class",t),etThemeBuilder.etHeader.et_sortable(),etThemeBuilder.etHeader.et_resizable()):"single-product"==n&&(o.find(".et_product-single-wrapper").html(l(e.builder).find(".et_product-single-wrapper").html()),etThemeBuilder.etSections.et_sortable(".et_customizer-builder-single_product"),l(".et_call-multiple-single-products").trigger("click")),l(".et_condition-action.et_condition-add").removeClass("hidden")),"add"==i&&o.find(".et_builder-multiple-content ul li.last").find(".et_header-edit").trigger("click"),"edit"==i&&l(".et_conditions-notice.header-notice").addClass("hidden"),"copy"!=i&&"copy_default"!=i||l('[data-header="'+e.id+'"] [data-action="edit"]').trigger("click"),"remove"==i&&(e=l(".et_customizer-builder.loaded .et_builder-multiples .et_builder-multiple-content ul li").length,l(".et_customizer-builder.loaded .multiple-count").html(e))},error:function(e){etThemeBuilder.etGlobal.et_notice("multiple-action-error","error",i)},complete:function(){l(".et_li-processing").removeClass("et_li-processing"),etThemeBuilder.etHeader.et_resizable(),etThemeBuilder.etMultipleTemplates.et_conditions()}})},et_add_options_devices_dynamic:function(e){var t=wp.customize.section(e);wp.customize.section.trigger(t.id,t),t.loaded=!0,t.loadingContainer.fadeOut("slow",function(){l(this).remove()});var i,t="#accordion-section-"+e;l(t).is(".et_device-added")||(l(t).addClass("et_device-added"),i=l("#customize-footer-actions .devices-wrapper").html(),t="#"+l(t).attr("aria-owns"),l.each(l(t).find("li[id*=_et-mobile], li[id*=_et-tablet], li[id*=_et-desktop]"),function(){var e=l(this).attr("id");e=(e=(e=e.replace("_et-mobile","")).replace("_et-tablet","")).replace("_et-desktop",""),1<l("li[id*="+e+"_et]").length&&l(this).addClass("multi-device").prepend(i)})),"mobile_panel"==e&&l(".devices-wrapper .preview-mobile").trigger("click")},et_conditions_save_all:function(i){var a=[],o=[],n=0,r="header";l(".et_customizer-builder.loaded").hasClass("et_customizer-builder-header")?r="header":l(".et_customizer-builder.loaded").hasClass("et_customizer-builder-single_product")&&(r="single-product"),l.each(l(".et_condition"),function(){var e,t;l(this).hasClass("et_to-remove")?o[n++]=l(this).attr("data-condition"):(t=(t=l(this).find(".secondary-select:not(.hidden)").val())&&!["site","select","all_singular","front_page","attachment","not_found","all_archives","author","date","search"].includes(t)?JSON.parse(t):t||"",e=l(this).find(".primary-select").val(),"single-product"==r&&(e=JSON.parse(e)),t={header:i,primary:e,secondary:t,third:l(this).find(".third-select").val(),condition:l(this).attr("data-condition"),"sub-items":l(this).find(".sub-items").prop("checked")||!1,language:l(this).find(".et-languages-select").val()||!1},a[n++]=t)}),l.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_conditions_actions",type:"save_all",data_save:a,data_remove:o,builder:r},dataType:"json",success:function(e){l(".et_customizer-builder.loaded .et_builder-multiples .et_builder-multiple-content").html(e.headers);e=l(".et_customizer-builder.loaded .et_builder-multiples .et_builder-multiple-content ul li").length;l(".et_customizer-builder.loaded .multiple-count").html(e)},error:function(e){etThemeBuilder.etGlobal.et_notice("conditions-save","error")},complete:function(e){}})},et_conditions:function(){var a="header";l(".et_customizer-builder.loaded").hasClass("et_customizer-builder-header")?a="header":l(".et_customizer-builder.loaded").hasClass("et_customizer-builder-single_product")&&(a="single-product");var o=["site","select","all_singular","front_page","attachment","not_found","all_archives","author","date","search"];function n(e,t,i){t?(i=JSON.parse(i),["product_cat","product_tag","brand","category","post_tag","portfolio_category"].includes(i.slug)?e.find(".sub-items-section").removeClass("hidden").addClass("active"):e.find(".sub-items-section").removeClass("active").addClass("hidden")):e.find(".sub-items-section").removeClass("active").addClass("hidden")}l(document).on("change",".primary-select",function(){var e,t=l(this).val(),i=l(this).parents(".et_condition");"header"==a?(n(i,!1,!1),i.find(".secondary-select").addClass("hidden"),(e=i.find(".secondary-select.secondary-"+l(this).val())).removeClass("hidden"),o.includes(e.val())||o.includes(t)||e.val().includes("post_type_archive")?(i.find(".select2-selection.select2-selection--single").addClass("hidden"),i.find(".third-select").removeClass("active")):(i.find(".select2-selection.select2-selection--single.hidden").removeClass("hidden"),i.find(".third-select").addClass("active"))):"single-product"==a&&(i.find(".select2-selection.select2-selection--single.hidden").removeClass("hidden"),i.find(".third-select").addClass("active"),i.find(".third-select").val("").trigger("change"),n(i,!0,l(this).val()))}),l.each(l(".third-select:not(.active)"),function(){var e="";l(this).hasClass("hidden")&&(e="hidden");e=l(this).select2({containerCssClass:e,ajax:{url:ajaxurl,dataType:"json",data:function(e){var t="";return"header"==a?t=l(this).parents("li").find(".secondary-select:not(.hidden)").val():"single-product"==a&&(t=l(this).parents("li").find(".primary-select").val()),{search:e.term,action:"et_ajax_conditions_data",data:JSON.parse(t)}},processResults:function(e){return{results:e}}}});e.data("select2")&&e.data("select2").on("open",function(e){this.results.clear(),this.dropdown._positionDropdown()})}),l(document).on("change",".secondary-select",function(){var e=l(this).parents(".et_condition");o.includes(l(this).val())||l(this).val().includes("post_type_archive")?(e.find(".select2-selection.select2-selection--single").addClass("hidden"),e.find(".third-select").removeClass("active"),n(e,!1,!1)):(e.find(".select2-selection.select2-selection--single.hidden").removeClass("hidden"),e.find(".third-select").addClass("active"),n(e,!0,l(this).val())),e.find(".third-select").val("").trigger("change")})},et_conditions_actions:function(){var n=["site","select","all_singular","front_page","attachment","not_found","all_archives","author","date","search"];l(document).on("click",".et_condition-action",function(){var e="header";l(".et_customizer-builder.loaded").hasClass("et_customizer-builder-header")?e="header":l(".et_customizer-builder.loaded").hasClass("et_customizer-builder-single_product")&&(e="single-product");var t=l(this).attr("data-action"),i={},a=l(this).parents(".et_condition"),o=(o=a.find(".secondary-select:not(.hidden)").val())&&!n.includes(o)?JSON.parse(o):o||"";if("save"==t)i={header:l(".et_headers-multiple-content .editing").attr("data-header"),primary:a.find(".primary-select").val(),secondary:o,third:a.find(".third-select").val(),condition:a.attr("data-condition")};else if("remove"==t)return void a.addClass("et_to-remove hidden");l.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_conditions_actions",type:t,data:i,builder:e},dataType:"json",success:function(e){"add"==t?(l(".et_conditions").append(e.template),etThemeBuilder.etMultipleTemplates.et_conditions()):"remove"==t&&l(".et_headers-multiple-conditions .et_conditions").html(e.template)},error:function(e){etThemeBuilder.etGlobal.et_notice("conditions-select-data","error")},complete:function(){}})})}},etPresets:{et_init:function(){wp.customize.panel("header-builder")&&(l(document).on("change","#input_header_presets_package_et-desktop",function(){var e=wp.customize.control("header_presets_package_et-desktop").setting.get();etThemeBuilder.etMultipleTemplates.et_get_ajax_options(),l.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_get_presets",preset:e},dataType:"json",success:function(e){var t=l(".et_customizer-builder").attr("class"),i=encodeURI(e.connect_block_package);wp.customize.control("header_top_elements").setting.set(e.header_top_elements),wp.customize.control("header_main_elements").setting.set(e.header_main_elements),wp.customize.control("header_bottom_elements").setting.set(e.header_bottom_elements),wp.customize.control("connect_block_package").setting.set(i);i=l(e.template).find(".et_desktop-mod"),i=l(i).removeClass("hidden");l(".et_customizer-builder").find(".et_desktop-mod").replaceWith(i),l(".et_customizer-builder").attr("class",t),l.each(e.options,function(e,t){wp.customize.control(e)&&wp.customize.control(e).setting.set(t)}),etThemeBuilder.etHeader.et_sortable(),etThemeBuilder.etHeader.et_resizable(),l(".et_customizer-builder").find("> .et-message").remove(),l(".et_customizer-builder").prepend('<div class="et-message et-warning" style="margin:0 -15px;">Please, save your changes and reload your page after you have chosen your template.</div>')},error:function(e){etThemeBuilder.etGlobal.et_notice("get-preset","error")},complete:function(){setTimeout(function(){l(".et_customizer-builder").find("> .et-message").fadeOut()},2e4)}})}),l(document).on("change","#input_header_presets_package_et-mobile",function(){var e=wp.customize.control("header_presets_package_et-mobile").setting.get();l.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_get_presets",preset:e},dataType:"json",success:function(e){var t=l(".et_customizer-builder").attr("class"),i=encodeURI(e.connect_block_mobile_package);wp.customize.control("header_mobile_top_elements").setting.set(e.header_mobile_top_elements),wp.customize.control("header_mobile_main_elements").setting.set(e.header_mobile_main_elements),wp.customize.control("header_mobile_bottom_elements").setting.set(e.header_mobile_bottom_elements),wp.customize.control("connect_block_mobile_package").setting.set(i);i=l(e.template).find(".et_mobile-mod"),i=l(i).removeClass("hidden");l(".et_customizer-builder").find(".et_mobile-mod").replaceWith(i),l(".et_customizer-builder").attr("class",t),l.each(e.options,function(e,t){wp.customize.control(e)&&wp.customize.control(e).setting.set(t)}),etThemeBuilder.etHeader.et_sortable(),etThemeBuilder.etHeader.et_resizable(),l(".et_customizer-builder").find("> .et-message").remove(),l(".et_customizer-builder").prepend('<div class="et-message et-warning" style="margin:0 -15px;">Please, save your changes and reload your page after you have chosen your template.</div>')},error:function(e){etThemeBuilder.etGlobal.et_notice("get-preset","error")},complete:function(){setTimeout(function(){l(".et_customizer-builder").find("> .et-message").fadeOut()},2e4)}})}),l(document).on("change",'[data-id="header_presets_select"]',function(){var t=l(this).parents("li");t.css("pointer-events","none");var e=wp.customize.control("header_presets_select").setting.get();e?l.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_get_remote_preset",preset:e},dataType:"json",success:function(e){e=JSON.parse(e);etThemeBuilder.etMultipleTemplates.et_render_options(e),etThemeBuilder.etPresets.et_refresh_builder(e),t.css("pointer-events","all")},error:function(e){},complete:function(){}}):t.css("pointer-events","all")}),this.import_export())},et_refresh_builder:function(e,i){"header"==(i=i||"header")?(e.header_top_elements=btoa(e.header_top_elements),e.header_main_elements=btoa(e.header_main_elements),e.header_bottom_elements=btoa(e.header_bottom_elements),e.connect_block_package=btoa(e.connect_block_package),e.header_mobile_top_elements=btoa(e.header_mobile_top_elements),e.header_mobile_main_elements=btoa(e.header_mobile_main_elements),e.header_mobile_bottom_elements=btoa(e.header_mobile_bottom_elements),e.connect_block_mobile_package=btoa(e.connect_block_mobile_package)):(e.product_single_elements=btoa(e.product_single_elements),e.connect_block_product_single_package=btoa(e.connect_block_product_single_package)),l.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_builder",options:e,builder:i},dataType:"json",success:function(e){var t;"header"==i?(t=l(".et_customizer-builder-header").attr("class"),l(".et_customizer-builder-header").find(".et_mobile-mod").html(l(e.builder).find(".et_mobile-mod").html()),l(".et_customizer-builder-header").find(".et_desktop-mod").html(l(e.builder).find(".et_desktop-mod").html()),l(".et_customizer-builder-header").attr("class",t),etThemeBuilder.etHeader.et_sortable(),etThemeBuilder.etHeader.et_resizable()):(l(document).find(".et_product-single-wrapper").html(l(e.builder).find(".et_product-single-wrapper").html()),etThemeBuilder.etSections.et_sortable(".et_customizer-builder-single_product"))},error:function(e){etThemeBuilder.etGlobal.et_notice("reset-header-builder","error")},complete:function(){l(".wp-customizer").removeClass("et-preload")}})},et_set_presets:function(){l(document).on("click",".preset-load",function(){var e=l(this).attr("data-preset");l.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_get_presets",preset:e},dataType:"json",success:function(e){var t=l(".et_customizer-builder").attr("class"),i=encodeURI(e.connect_block_package);wp.customize.control("header_top_elements").setting.set(e.header_top_elements),wp.customize.control("header_main_elements").setting.set(e.header_main_elements),wp.customize.control("header_bottom_elements").setting.set(e.header_bottom_elements),wp.customize.control("connect_block_package").setting.set(i),l(".et_customizer-builder").html(e.template),l(".et_customizer-builder").attr("class",t),l.each(e.options,function(e,t){wp.customize.control(e)&&wp.customize.control(e).setting.set(t)}),etThemeBuilder.etHeader.et_sortable(),etThemeBuilder.etHeader.et_resizable()},error:function(e){etThemeBuilder.etGlobal.et_notice("set-preset","error")},complete:function(){}})})},import_export:function(){function i(e){e=JSON.parse(e.target.result);if(!(e.header_top_elements||e.header_main_elements||e.header_bottom_elements||e.product_single_elements))return l("#et_import-file, #et_import-product-file").attr("value",""),void l('.et_header-import .et_import-error[data-type="filedata"]').removeClass("hidden");l(".et_header-import .et_header-import-btn").removeClass("hidden"),etPreImport=e}l(document).on("click",".et_header-import-export .et_header-export-btn",function(){etThemeBuilder.etMultipleTemplates.et_get_ajax_options();var e=etThemeBuilder.etMultipleTemplates.et_get_options(!1),t=l(this).attr("data-file")?l(this).attr("data-file"):"header",i="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),e=document.getElementById("et_download-export-file");e.setAttribute("href",i),e.setAttribute("download",t+".json"),e.click()}),l(document).on("click",".et_header-import-btn span",function(){l(".wp-customizer").addClass("et-preload"),etThemeBuilder.etMultipleTemplates.et_get_ajax_options(),etThemeBuilder.etMultipleTemplates.et_render_options(etPreImport),l(this).hasClass("et_single-product-import-btn")?etThemeBuilder.etPresets.et_refresh_builder(etPreImport,"single-product"):etThemeBuilder.etPresets.et_refresh_builder(etPreImport),l(".et_header-import .et_header-import-btn").addClass("hidden"),l("#et_import-file, #et_import-product-file").attr("value","").trigger("change")}),l(document).on("change","#et_import-file, #et_import-product-file",function(e){!function(e){if(etPreImport={},l(".et_header-import .et_header-import-btn").addClass("hidden"),l('.et_header-import .et_import-error[data-type="filedata"]').addClass("hidden"),l('.et_header-import .et_import-error[data-type="filetype"]').addClass("hidden"),"application/json"!=e.target.files[0].type)return l("#et_import-file, #et_import-product-file").attr("value",""),l('.et_header-import .et_import-error[data-type="filetype"]').removeClass("hidden");var t=new FileReader;t.onload=i,t.readAsText(e.target.files[0])}(e)})}},etSections:{et_init:function(e,t){"object"!=typeof t&&(t={});t=Object.assign({},{sticky:!1},t),this.et_sortable(e),this.et_add_column(e,t),this.et_remove_column(e),this.et_remove_inside(e),this.et_set_options(e),this.et_style_column_popup(e),t.sticky&&this.et_column_popup(e),l.each(l(".et_product-block:not(.et_new-column)"),function(){etThemeBuilder.etGlobal.et_range_fields('[data-id="'+l(this).attr("data-id")+'"] .block-width')}),etThemeBuilder.etGlobal.et_panel_resize(".et_customizer-builder-single_product")},et_show:function(e){e&&(e.removeClass("hidden fadeOut").addClass("slide-top"),setTimeout(function(){e.addClass("loaded")},300))},et_close:function(e){e&&(e.removeClass("slide-top").addClass("fadeOut"),setTimeout(function(){e.removeClass("loaded collapsed").addClass("hidden")},300))},et_sortable:function(e){l(e).find(".et_product-single").sortable({cursorAt:{left:5,top:5},items:".et_product-block:not(.et_new-column)",helper:function(e,t){return'<span class="et_sorting-gost dashicons dashicons-image-rotate-left"></span>'},start:function(e,t){},stop:function(e,t){l.each(l(".et_product-block:not(.et_new-column)"),function(){etThemeBuilder.etSections.et_set_column(l(this))})}}).disableSelection(),l(e+" .et_column-inner, "+e+" .et_column-content").sortable({connectWith:".et_column-content, .et_inside-elements",cursorAt:{left:5,top:5},helper:function(e,t){return this.connectBlock=!1,this.removeData=!1,t.parents(".et_column").hasClass("et_products-elements")&&"connect_block"==t.attr("data-element")&&(this.connectBlock="element-"+etThemeBuilder.etGlobal.et_generate_random(5),t.clone().insertAfter(t),t.attr("data-id",this.connectBlock)),'<span class="et_sorting-gost dashicons dashicons-image-rotate-left"></span>'},over:function(e,t){l(this).addClass("et_sorting-over")},out:function(e,t){l(this).removeClass("et_sorting-over")},start:function(e,t){var i=t.item;i.parents(".et_column").hasClass("et_product-block")&&(delete(t=etThemeBuilder.etSections.et_get_data())[l(this).parents(".et_product-block").attr("data-id")].data[i.attr("data-id")],this.removeData=t)},stop:function(e,t){var t=t.item,i=t.parents(".et_product-block");if("connect_block"==t.attr("data-element")&&t.parent().hasClass("et_column-inner"))t.remove();else{if(t.parent().hasClass("et_inside-elements")){if("connect_block"==t.attr("data-element"))return void l(this).sortable("cancel");etThemeBuilder.etSections.et_set_data(this.removeData),l.each(t.parents(".et_popup").find(".et_customizer-element"),function(){etThemeBuilder.etConnectBlock.et_add_inside(l(this))})}else etThemeBuilder.etSections.et_set_data(this.removeData),l.each(i.find(".et_customizer-element"),function(){etThemeBuilder.etSections.et_add_inside(i,l(this))});this.connectBlock&&(etThemeBuilder.etSections.et_set_data(this.removeData),etThemeBuilder.etConnectBlock.et_add_block(this.connectBlock))}}}).disableSelection()},et_column_popup:function(e){l(document).on("click",e+" .et_column-edit",function(){l(".et_popup").remove();var e=l(this),t=e.parents(".et_product-block"),i="",a=etThemeBuilder.etSections.et_get_data()[t.attr("data-id")].sticky;i+='<div class="et_popup ui-draggable ui-draggable-handle et_sticky-popup" data-id="">',i+='<div class="et_actions-1">',i+='<span class="dashicons dashicons-move"></span>',i+="<span>"+t.attr("data-title")+"</span>",i+='<span class="dashicons dashicons-no-alt et_close"></span>',i+="</div>",i+='<div class="et_inside-wrapper">',i+="<label>Select a block from the list for which the content will be fixed. Select <span>'none'</span> to disable fixed content.</label>",i+=" <select>",i+='<option value="false">None</option>',l.each(l(".et_customizer-builder.loaded .et_product-block:not(.et_new-column)"),function(){t.attr("data-id")!=l(this).attr("data-id")&&(a==l(this).attr("data-id")?i+='<option value="'+l(this).attr("data-id")+'" selected>'+l(this).attr("data-title")+"</option>":i+='<option value="'+l(this).attr("data-id")+'">'+l(this).attr("data-title")+"</option>")}),i+=" </select>",i+="</div>",i+="</div>",e.parents(".et_customizer-builder").find(".et_header-head").append(i),l(".et_popup").draggable(),l(document).on("click",".et_close, .customize-panel-back",function(){l(".et_popup").remove()}),l(".et_popup select").on("change",function(){t.attr("data-sticky",l(this).val()),etThemeBuilder.etSections.et_set_column(t)})})},et_style_column_popup:function(e){l(document).on("click",e+" .et_style-column",function(e){l(".et_popup").remove();var i=l(this),a=i.parents(".et_product-block"),t="";l(".customize-save-button-wrapper").hasClass("et_save-multiple")&&(t=l(".et_builder-multiple-content.et_product-single-multiple-content .editing").attr("data-header")),l.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_template",template:"popup-section-options",id:a.attr("data-id"),style:btoa(a.attr("data-style")?a.attr("data-style"):""),multiple:t},dataType:"html",success:function(e){var t=etThemeBuilder.etGlobal.et_generate_random(7);i.parents(".et_customizer-builder").find(".et_header-head").append(e),l(".et_popup .style-popup-title").html(a.attr("data-title")),l(".et_popup").addClass(t+" for-"+a.attr("data-id")),l(".et_popup").draggable(),etThemeBuilder.etSections.et_close_style_column(),etThemeBuilder.etSections.et_save_style_column(a,t),etThemeBuilder.etSections.et_init_style_column(t)},error:function(e){etThemeBuilder.etGlobal.et_notice("block-style-popup","error")},complete:function(){}})})},et_close_style_column:function(){l(document).on("click",".et_close, .customize-panel-back",function(){l(".et_popup").remove()})},et_save_style_column:function(e,t){l(document).on("click","."+t+".et_popup.for-"+e.attr("data-id")+" .et_column-style-save",function(){var i={};l.each(l(".section-option"),function(e,t){i[l(t).attr("data-option")]=l(t).val()}),e.attr("data-style",JSON.stringify(i)),etThemeBuilder.etSections.et_set_column(e),l(".et_popup").remove()})},et_init_style_column:function(e){l("."+e+'.et_popup [data-option="background-color"]').wpColorPicker(),l("."+e+'.et_popup [data-option="border-color"]').wpColorPicker(),l("."+e+'.et_popup [data-option="color"]').wpColorPicker(),etThemeBuilder.etGlobal.et_range_fields("."+e+" .section-border-radius .block-width"),l(document).on("click","."+e+" .etheme_upload-image, ."+e+" .et-background-image-upload",function(e){e.preventDefault();var i=l(this),a=wp.media.frames.file_frame=wp.media({title:"Select or upload image",library:{type:"image"},button:{text:"Select"},multiple:!1});a.on("select",function(){var e=a.state().get("selection").first().toJSON(),t=i.parents(".section-background-image");t.find(".placeholder.etheme_upload-image").addClass("hidden"),t.find(".attachment-thumb").attr("src",e.url),t.find(".attachment-thumb").removeClass("hidden"),t.find("input.background-image").attr("value",e.id),t.find("input.background-image").change(),t.find(".et-background-image-remove").removeClass("hidden")}),a.open()}),l(document).on("click",".et-background-image-remove",function(e){var t=l(this),i=t.parents(".section-background-image");t.addClass("hidden"),i.find("input.background-image").attr("value",""),i.find(".attachment-thumb").removeClass("hidden"),i.find(".attachment-thumb").addClass("hidden"),i.find(".placeholder.etheme_upload-image").removeClass("hidden"),i.find("input.background-image").change()})},et_remove_column:function(e){l(document).on("click",e+" .et_remove-column",function(e){etThemeBuilder.etSections.et_remove_all_inside(l(this).parents(".et_product-block")),l(this).parents(".et_product-block").remove(),etThemeBuilder.etSections.et_remove_data(l(this).parents(".et_product-block")),etThemeBuilder.etSections.et_disable_sticky(l(this).parents(".et_product-block"))})},et_set_options:function(e){l(document).on("change",e+' .et_product-block .block-width input[type="range"]',function(){etThemeBuilder.etSections.et_set_column(l(this).parents(".et_product-block"))}),l(document).on("input paste change",e+' .et_product-block .block-width input[type="text"]',function(){etThemeBuilder.etSections.et_set_column(l(this).parents(".et_product-block"))}),l(document).on("change",e+" .et_product-block .block-align input",function(){etThemeBuilder.etSections.et_set_column(l(this).parents(".et_product-block"))})},et_add_column:function(a,o){l(document).on("click",a+" .et_new-column",function(e){var t=l(this);t.css("pointer-events","none");var i=0;l.each(l(a+" .et_product-block:not(.et_new-column)"),function(){parseInt(l(this).attr("data-index"))>i&&(i=parseInt(l(this).attr("data-index")))}),l.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_get_element",elements:"product-column",index:parseInt(i)+1,sticky:o.sticky},dataType:"html",success:function(e){l(a+" .et_product-single-inner").append(e),l.each(l(a+" .et_product-block:not(.et_new-column)"),function(){etThemeBuilder.etGlobal.et_range_fields('[data-id="'+l(this).attr("data-id")+'"] .block-width')}),l.each(l(a+" .et_product-block:not(.et_new-column"),function(){etThemeBuilder.etSections.et_set_column(l(this))}),etThemeBuilder.etSections.et_sortable(a)},error:function(e){etThemeBuilder.etGlobal.et_notice("add-column","error")},complete:function(){t.css("pointer-events","all")}})})},et_get_data:function(){var e=l(".et_customizer-builder.loaded").attr("data-option"),e=wp.customize.control(e).setting.get();return e=e?JSON.parse(e):""},et_set_data:function(e){var t;e&&(t=l(".et_customizer-builder.loaded").attr("data-option"),wp.customize.control(t).setting.set(JSON.stringify(e)))},et_set_column:function(e){var i,t,a=this.et_get_data(),o=".et_customizer-builder.loaded",n=l(o+" .et_product-single .et_product-block").index(e);a?(i=[],t={},l.each(l(o+" .et_product-block:not(.et_new-column"),function(){i.push(l(this).attr("data-id"))}),l.each(a,function(e,t){-1==i.indexOf(e)&&delete a[e]}),a[e.attr("data-id")]&&a[e.attr("data-id")].data&&(t=a[e.attr("data-id")].data),e.attr("data-id")&&(a[e.attr("data-id")]={title:e.attr("data-title"),width:e.find('input[type="range"]').val(),index:n+1,align:e.find(".block-align input:checked").val(),sticky:e.attr("data-sticky"),data:t,style:e.attr("data-style")})):(a={})[e.attr("data-id")]={title:e.attr("data-title"),width:e.find('input[type="range"]').val(),index:n+1,align:"start",sticky:e.attr("data-sticky"),data:{},style:{}},etThemeBuilder.etSections.et_set_data(a)},et_remove_data:function(e){var t=this.et_get_data();delete t[e.attr("data-id")],etThemeBuilder.etSections.et_set_data(t)},et_disable_sticky:function(e){var t=l(".et_customizer-builder.loaded").find('.et_column[data-sticky="'+e.attr("data-id")+'"]'),i=t.attr("data-id");t&&i&&((e=this.et_get_data())[i].sticky=!1,t.attr("data-sticky",!1),etThemeBuilder.etSections.et_set_data(e))},et_add_inside:function(e,t){var i=this.et_get_data();i[e.attr("data-id")].data[t.attr("data-id")]={element:t.attr("data-element"),index:e.find(".et_column-content .et_customizer-element").index(t)},etThemeBuilder.etSections.et_set_data(i)},et_remove_inside:function(o){l(document).on("click",o+" .et_actions .et_remove",function(e){var t=l(this).parents(".et_customizer-element"),i=etThemeBuilder.etSections.et_get_data(),a=l(this).parents(".et_product-block").attr("data-id");t.parent().hasClass("et_inside-elements")?(etThemeBuilder.etConnectBlock.et_remove_inside(t),l(this).closest(".et_customizer-element").remove()):(delete i[a].data[t.attr("data-id")],etThemeBuilder.etSections.et_set_data(i)),"connect_block"==t.attr("data-element")?(etThemeBuilder.etConnectBlock.et_remove_all_inside(t.attr("data-id")),etThemeBuilder.etConnectBlock.et_remove_block(t.attr("data-id"))):l(o+" .et_column-inner").append('<div class="et_customizer-element ui-state-default ui-sortable-handle" data-id="'+t.attr("data-id")+'" data-size="1" data-element="'+t.attr("data-element")+'">'+t.html()+"</div>"),t.remove()})},et_remove_all_inside:function(e){var t=e,e=etThemeBuilder.etSections.et_get_data(),t=t.attr("data-id"),i={};l.each(e[t].data,function(e,t){"connect_block"!=t.element?i[t.element]="":(etThemeBuilder.etConnectBlock.et_remove_all_inside(e),etThemeBuilder.etConnectBlock.et_remove_block(e))}),l.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_get_element",elements:i},dataType:"html",success:function(e){l(".et_customizer-builder.loaded .et_column-inner").append(e)},error:function(e){etThemeBuilder.etGlobal.et_notice("remove-inside-column","error")},complete:function(){}})}},etConnectBlock:{et_add_block:function(e){var t=this.et_get_package();t[t.length]={id:e,type:"horizontal",separator:"false",align:"center",spacing:"5",data:""},this.et_set_package(t)},et_get_inside:function(e,a){a=a||e.parents(".et_popup").attr("data-id");var o="",t={},e=this.et_get_package();return e.find(function(e,t,i){if(e.id==a)return o=t,!1}),{inside:t=e[o].data?JSON.parse(e[o].data):t,blockID:o}},et_set_inside:function(e,t){var i=this.et_get_package();e=JSON.stringify(e),i[t].data=e,this.et_set_package(i)},et_set_type:function(a,e){var o="",t=this.et_get_package();t.find(function(e,t,i){if(e.id==a)return o=t,!1}),t[o].type=e,this.et_set_package(t)},et_get_type:function(a){var o="",e=this.et_get_package();return e.find(function(e,t,i){if(e.id==a)return o=t,!1}),e[o].type},et_set_separator:function(a,e){var o="",t=this.et_get_package();t.find(function(e,t,i){if(e.id==a)return o=t,!1}),t[o].separator=e,this.et_set_package(t)},et_get_separator:function(a){var o="",e=this.et_get_package();return e.find(function(e,t,i){if(e.id==a)return o=t,!1}),e[o].separator},et_set_align:function(a,e){var o="",t=this.et_get_package();t.find(function(e,t,i){if(e.id==a)return o=t,!1}),t[o].align=e,this.et_set_package(t)},et_get_align:function(a){var o="",e=this.et_get_package();return e.find(function(e,t,i){if(e.id==a)return o=t,!1}),e[o].align},et_add_inside:function(e){var t=this.et_get_inside(e),i=t.blockID,a=l(".et_inside-elements .et_customizer-element").index(e);(t=t.inside)[e.attr("data-element")]={index:a+1},this.et_set_inside(t,i)},et_remove_inside:function(e){var t=e.attr("data-element"),i=this.et_get_inside(e),e=i.blockID;delete(i=i.inside)[t],this.et_set_inside(i,e)},et_remove_all_inside:function(e){var e=this.et_get_inside("",e),t=this.et_get_block_package("selector");l.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_get_element",elements:e.inside},dataType:"html",success:function(e){l(t).find(".et_column-inner").append(e),etThemeBuilder.etHeader.et_resizable()},error:function(e){etThemeBuilder.etGlobal.et_notice("remove-all-inside-block","error")},complete:function(){}})},et_remove_block:function(i){var e=this.et_get_package(),a="";l.each(e,function(e,t){t.id==i&&(a=e)}),e.splice(a,1),this.et_set_package(e)},et_convert_data:function(e,t){return e=t?(e=decodeURI(e),JSON.parse(e)):(e=JSON.stringify(e),encodeURI(e))},et_get_package:function(){var e=this.et_get_block_package("id"),e=wp.customize.control(e).setting.get();return e=this.et_convert_data(e,!0)},et_set_package:function(e){var t=this.et_get_block_package("id");e=this.et_convert_data(e,!1),wp.customize.control(t).setting.set(e)},et_get_block_package:function(e){var t="connect_block_package",i=".et_desktop-mod";return l(".et_customizer-builder-single_product").hasClass("loaded")?(t="connect_block_product_single_package",i=".et_customizer-builder-single_product"):l(".et_customizer-builder-archive_product").hasClass("loaded")?(t="connect_block_product_archive_package",i=".et_customizer-builder-archive_product"):l(".wp-full-overlay").hasClass("preview-mobile")&&(t="connect_block_mobile_package",i=".et_mobile-mod"),"id"==e?t:i},et_get_spacing:function(a,e){var o="",t=this.et_get_package();return t.find(function(e,t,i){if(e.id==a)return o=t,!1}),t[o].spacing},et_set_spacing:function(a,e){var o="",t=this.et_get_package();t.find(function(e,t,i){if(e.id==a)return o=t,!1}),t[o].spacing=e,this.et_set_package(t)},et_popup:function(e){var t=e.parents('[data-element="connect_block"]'),i=t.attr("data-id"),a=this.et_get_inside("",i),o=this.et_get_type(i),n=this.et_get_separator(i),r=this.et_get_align(i),e=this.et_get_spacing(i);t.addClass("et_popup-open"),l(".et_popup").remove(),l.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_popup",elements:a.inside,type:o,separator:n,align:r,spacing:e,id:i},dataType:"html",success:function(e){t.parents(".et_customizer-builder").find(".et_header-head").append(e),etThemeBuilder.etGlobal.et_range_fields("#et_popup-slider"),l(".et_popup").draggable(),l(".et_inside-elements").sortable({stop:function(e,t){t=t.item;l.each(t.parents(".et_popup").find(".et_customizer-element"),function(){etThemeBuilder.etConnectBlock.et_add_inside(l(this))})}}).disableSelection()},error:function(e){etThemeBuilder.etGlobal.et_notice("block-popup","error")},complete:function(){}}),l(document).on("change","#block_type",function(){var e="horizontal";l(this).is(":checked")&&(e="vertical");var t=l(this).parents(".et_popup").attr("data-id");etThemeBuilder.etConnectBlock.et_set_type(t,e)}),l(document).on("change","#block_separator",function(){var e="false";l(this).is(":checked")&&(e="true");var t=l(this).parents(".et_popup").attr("data-id");etThemeBuilder.etConnectBlock.et_set_separator(t,e)}),l(document).on("change","#input_block_align input",function(){var e=l(this).parent().find("input:checked").val(),t=l(this).parents(".et_popup").attr("data-id");etThemeBuilder.etConnectBlock.et_set_align(t,e)}),l(document).on("mousemove change",'#et_popup-slider input[type="range"]',function(){var e=l(this).val(),t=l(this).parents(".et_popup").attr("data-id");etThemeBuilder.etConnectBlock.et_set_spacing(t,e)}),l(document).on("input paste change",'#et_popup-slider input[type="text"]',function(){var e=l(this).val(),t=l(this).parents(".et_popup").attr("data-id");etThemeBuilder.etConnectBlock.et_set_spacing(t,e)}),l(document).on("click",".et_close, .et_button.mobile, .et_button.desktop, .customize-panel-back",function(){t.removeClass("et_popup-open"),l(".et_popup").remove()})}},etHeader:{et_init:function(){this.et_remove(),this.et_force_resize(),this.et_sortable(),this.et_resizable(),this.et_external_resize(),etThemeBuilder.etGlobal.et_panel_resize(".et_customizer-builder-header")},et_show:function(){l(".et_customizer-builder.et_customizer-builder-header").removeClass("hidden fadeOut").addClass("slide-top"),setTimeout(function(){l(".et_customizer-builder.et_customizer-builder-header").addClass("loaded")},300)},et_close:function(){l(".et_customizer-builder.et_customizer-builder-header").removeClass("slide-top").addClass("fadeOut"),setTimeout(function(){l(".et_customizer-builder.et_customizer-builder-header").removeClass("loaded collapsed").addClass("hidden")},200)},et_sortable:function(){l(".et_customizer-builder-header .et_column:not(.et_col-sm-12), .et_customizer-builder-header .et_elements .et_column-inner").sortable({connectWith:".et_column",cursorAt:{left:5,top:5},cancel:".et_popup-open",helper:function(e,t){return this.connectBlock=!1,t.parents(".et_header-part").hasClass("et_elements")&&"connect_block"==t.attr("data-element")&&(this.connectBlock="element-"+etThemeBuilder.etGlobal.et_generate_random(5),t.clone().insertAfter(t),t.attr("data-id",this.connectBlock)),'<span class="et_sorting-gost dashicons dashicons-image-rotate-left"></span>'},start:function(e,t){var i=t.item,t=i.parent();this.startParent=t,this.removeData=!1,this.removeSection=i.parents(".et_header-part").attr("data-section"),l("body").removeClass("et_stop-drop"),t.removeClass("et_has-element")},over:function(e,t){l(this).addClass("et_sorting-over")},out:function(e,t){l(this).removeClass("et_sorting-over")},stop:function(e,t){var o=t.item,n=o.parent(),i=o.outerWidth(),a=o.outerWidth(!0);if(l(".et_sorting-over").removeClass("et_sorting-over"),o.parent().hasClass("et_inside-elements")){if(o.addClass("et_in-popup"),"connect_block"==o.attr("data-element")&&n.hasClass("et_inside-elements"))return this.startParent.hasClass("et_column-inner")?void o.remove():(l(this).sortable("cancel"),void this.startParent.addClass("et_has-element"));etThemeBuilder.etHeader.et_delete_data(o,this.removeSection),l.each(o.parents(".et_popup").find(".et_customizer-element"),function(){etThemeBuilder.etConnectBlock.et_add_inside(l(this))})}else if("connect_block"!=o.attr("data-element")||"et_column-inner"!=n.attr("class"))if(o.parents(".et_header-part").hasClass("et_elements"))"connect_block"==o.attr("data-element")&&o.remove();else{var r,t="connect_block"==o.attr("data-element")&&this.startParent.hasClass("et_column-inner");if(n.hasClass("et_has-element"))return t?void o.remove():(l(this).sortable("cancel"),void this.startParent.addClass("et_has-element"));etThemeBuilder.etHeader.et_stop_drop(n,"","",l(this),t,o),l("body").hasClass("et_stop-drop")?this.startParent.addClass("et_has-element"):(n.addClass("et_has-element"),etThemeBuilder.etHeader.et_delete_data(o,this.removeSection),o.outerWidth()<o.parent().width()&&o.outerWidth(o.parent().width()-(a-i)),12==n.attr("data-index")&&1<o.attr("data-size")&&(o.outerWidth(o.parent().width()-(a-i)),o.attr("data-size",1)),o.parents(".et_header-part").find('[data-index="12"]').hasClass("et_has-element")||(r=0,l.each(o.parents(".et_header-part").find(".et_column"),function(){l(this).hasClass("et_has-element")&&(r=l(this).attr("data-index"))}),parseInt(n.attr("data-index"))>=r&&12<parseInt(o.attr("data-size"))+parseInt(n.attr("data-index"))-1&&(t=12-parseInt(n.attr("data-index"))+1,o.attr("data-size",t),o.outerWidth(o.parent().width()*t-(a-i)))),l.each(o.parents(".et_header-part").find(".et_customizer-element:not(.et_in-popup)"),function(){var e,t,i=parseInt(l(this).parent().attr("data-index")),a=parseInt(n.attr("data-index"));a<i&&parseInt(o.attr("data-size"))+a>i&&(e=o.outerWidth(),t=o.outerWidth(!0),o.attr("data-size",a=i-a),o.outerWidth(n.width()*a-(t-e)),etThemeBuilder.etHeader.et_set_data(o,o.parent())),etThemeBuilder.etHeader.et_set_data(l(this),l(this).parent())}),l.each(this.startParent.parents(".et_header-part").find(".et_customizer-element:not(.et_in-popup)"),function(){etThemeBuilder.etHeader.et_set_data(l(this),l(this).parent())}),this.connectBlock&&(etThemeBuilder.etConnectBlock.et_add_block(this.connectBlock),etThemeBuilder.etHeader.et_resizable(o),o.removeClass("et-stuck-block")))}else o.remove()}}).disableSelection()},et_resizable:function(e){(e=e||l(".et_customizer-builder-header .et_customizer-element:not(.et-stuck-block)")).resizable({handles:"e",grid:l(".et_device:not(.hidden) .et_sortable").width(),maxWidth:12*l(".et_device:not(.hidden) .et_sortable").width(),cancel:".et_popup-open",start:function(e,t){var i=t.element,a=i.parent(),o=!1,n=l(this);l.each(i.parents(".et_header-part").find(".et_customizer-element:not(.et_in-popup)"),function(){var e=parseInt(l(this).parent().attr("data-index")),t=parseInt(a.attr("data-index"));if(t<e)return n.resizable("option","maxWidth",(e-t)*a.width()),!(o=!0)}),this.width=t.element.width(),o||l(this).resizable("option","maxWidth",12*a.width())},resize:function(e,t){this.width=t.element.width();var i=Math.ceil(this.width/l(".et_device:not(.hidden) .et_sortable").width());t.element.attr("data-size",i)},stop:function(e,t){var i=t.element,a=i.parent(),o=i.outerWidth(),n=i.outerWidth(!0),t=Math.ceil(this.width/l(".et_device:not(.hidden) .et_sortable").width());i.attr("data-size",t),i.outerWidth(a.width()*t-(n-o)),l(this).resizable("option","maxWidth",12*a.width()),l.each(i.parents(".et_header-part").find(".et_customizer-element:not(.et_in-popup)"),function(){etThemeBuilder.etHeader.et_set_data(l(this),l(this).parent())})}}).disableSelection()},et_force_resize:function(){l.each(l(".et_sortable .et_customizer-element"),function(){var e=l(this).parent(),t=l(this).attr("data-size"),i=l(this).outerWidth(),a=l(this).outerWidth(!0);l(this).outerWidth(e.width()*t-(a-i))})},et_external_resize:function(){l(document).on("click","button.collapse-sidebar",function(){setTimeout(function(){etThemeBuilder.etHeader.et_force_resize(),etThemeBuilder.etHeader.et_resizable()},200)})},et_remove:function(){l(document).on("click",".et_customizer-builder-header .et_remove",function(){var e=l(this).parents(".et_customizer-element");if(e.parent().removeClass("et_has-element"),"connect_block"==e.attr("data-element"))return etThemeBuilder.etConnectBlock.et_remove_all_inside(e.attr("data-id")),etThemeBuilder.etConnectBlock.et_remove_block(e.attr("data-id")),l.each(l(this).parents(".et_header-part").find(".et_customizer-element:not(.et_in-popup)"),function(){etThemeBuilder.etHeader.et_set_data(l(this),l(this).parent())}),etThemeBuilder.etHeader.et_delete_data(e),e.remove(),void etThemeBuilder.etHeader.et_resizable();e.parent().hasClass("et_inside-elements")?(etThemeBuilder.etConnectBlock.et_remove_inside(e),l(this).closest(".et_customizer-element").remove()):(l.each(l(this).parents(".et_header-part").find(".et_customizer-element:not(.et_in-popup)"),function(){etThemeBuilder.etHeader.et_set_data(l(this),l(this).parent())}),etThemeBuilder.etHeader.et_delete_data(e),e.remove());var t=l(".et_desktop-mod");(t=l(".wp-full-overlay").hasClass("preview-mobile")?l(".et_mobile-mod"):t).find(".et_elements .et_column .et_column-inner").append('<div class="et_customizer-element ui-state-default ui-sortable-handle" data-id="'+e.attr("data-id")+'" data-size="1" data-element="'+e.attr("data-element")+'">'+e.html()+"</div>"),etThemeBuilder.etHeader.et_resizable()})},et_delete_data:function(e,t){var i;(t=t||e.parents(".et_header-part").attr("data-section"))&&(delete(i=(i=wp.customize.control(t).setting.get())?JSON.parse(i):{})[e.attr("data-id")],wp.customize.control(t).setting.set(JSON.stringify(i)))},et_stop_drop:function(e,t,i,a,o,n){var r=e.prev();i=i||e,t=t||1,12<=++t||(r.hasClass("et_has-element")?parseInt(r.attr("data-index"))+parseInt(r.find(".et_customizer-element").attr("data-size"))>parseInt(i.attr("data-index"))&&(o?n.remove():a.sortable("cancel"),l("body").addClass("et_stop-drop")):etThemeBuilder.etHeader.et_stop_drop(r,t,i,a,o,n))},et_set_data:function(e,t){var i,a,o;e&&t&&((i=e.parents(".et_header-part").attr("data-section"))&&(a=wp.customize.control(i).setting.get(),etThemeBuilder.etHeader.et_set_offset(t),a?(a=JSON.parse(a),o=[],l.each(l("[data-section="+i+"] .et_customizer-element"),function(){o.push(l(this).attr("data-id"))}),l.each(a,function(e,t){-1==o.indexOf(e)&&delete a[e]}),e.attr("data-id")&&(a[e.attr("data-id")]={size:e.attr("data-size"),index:t.attr("data-index"),offset:e.attr("data-offset"),element:e.attr("data-element")})):(a={})[e.attr("data-id")]={size:e.attr("data-size"),index:t.attr("data-index"),offset:e.attr("data-offset"),element:e.attr("data-element")},wp.customize.control(i).setting.set(JSON.stringify(a))))},et_set_offset:function(e,t,i){var a=e.prev(),o={};o.current={size:(i=i||e).find(".et_customizer-element").attr("data-size"),index:i.attr("data-index")},1!=o.current.index?(t=t||1,13<=++t||(a.hasClass("et_has-element")?(o.prev={size:a.find(".et_customizer-element").attr("data-size"),index:a.attr("data-index")},e=parseInt(o.current.index)-(parseInt(o.prev.index)+parseInt(o.prev.size)),i.find(".et_customizer-element").attr("data-offset",e)):1!=a.attr("data-index")||a.hasClass("et_has-element")?etThemeBuilder.etHeader.et_set_offset(a,t,i):i.find(".et_customizer-element").attr("data-offset",o.current.index-1))):i.find(".et_customizer-element").attr("data-offset",0)}}},l(document).ready(function(){etThemeBuilder.init()})}(jQuery);