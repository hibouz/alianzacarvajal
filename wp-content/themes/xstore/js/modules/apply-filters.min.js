var ApplyFilters;!function(s){"use strict";var l,d;ApplyFilters={init:function(){l={},d={},this.loadedParams(),this.CollectParams(),this.ajaxRequest(),setTimeout(function(){s(".price_slider").parents("form").addClass("et-reinited")},100)},SetupClass:function(e){let t=e.parents("li");e.parents("ul").hasClass("st-swatch-preview")?t.addClass("selected chosen"):e.parents(".sidebar-widget").hasClass("etheme_widget_brands")?t.addClass("current-item"):t.addClass("chosen")},loadedParams:function(){s.each(ApplyFilters.GetUrlParams(location.href),function(e,t){t&&"undefined"!=t&&(l[e]?l[e].includes(t)||(l[e]+=","+t,d[e]+=","+t):(l[e]=t,d[e]=t))})},GetUrlParams:function(e){let t={},a=document.createElement("a");a.href=e;let i=a.search.substring(1);if(!i)return!1;let n=i.split("&");for(let e=0;e<n.length;e++){var r=n[e].split("=");t[r[0]]=decodeURIComponent(r[1])}return t},ReinitPriceSlider:function(){if(s(".price_slider").length){if("undefined"==typeof woocommerce_price_slider_params)return!1;s("input#min_price, input#max_price").hide(),s(".price_slider, .price_label").show();let e=s(".price_slider_amount #min_price"),t=s(".price_slider_amount #max_price"),a=e.data("min"),i=t.data("max"),n=parseInt(e.val()?e.val():a,10),r=parseInt(t.val()?t.val():i,10);d.min_price&&(n=d.min_price),d.max_price&&(r=d.max_price),s(".price_slider").slider({range:!0,animate:!0,min:a,max:i,values:[n,r],create:function(){e.val(n),t.val(r),s(document.body).trigger("price_slider_create",[n,r])},slide:function(e,t){s("input#min_price").val(t.values[0]),s("input#max_price").val(t.values[1]),s(document.body).trigger("price_slider_slide",[t.values[0],t.values[1]])},change:function(e,t){s(document.body).trigger("price_slider_change",[t.values[0],t.values[1]])}})}setTimeout(function(){s(".price_slider").parents("form").addClass("et-reinited")},100)},ajaxRequest:function(){if(Object.keys(d).length){s(this).attr("href");let e=window.location.href;var r=e.split("?")[0];e=e.split("?")[0]+"?et_ajax=true",s.ajax({url:e,method:"GET",timeout:1e5,dataType:"text",beforeSend:function(){s(".sidebar.et-mini-content.active").removeClass("active"),s(".et-toggle-mob-sidebars-wrapper").removeClass("et-content-shown")},success:function(e){var t=s(e).find(".sidebar").html(),a=s(document).find(".etheme-active-filters").next("div").attr("id"),i=s(document).find(".etheme-active-filters").prev("div").attr("id"),n=s(document).find(".etheme-active-filters").clone();s(".content-page .sidebar").html(t),a?s(document).find("#"+a).before(n):i&&s(document).find("#"+i).before(n),s.each(d,function(a,e){var t=e.split(",");1<t.length?s.each(t,function(e,t){ApplyFilters.SetupClass(s(document).find('a[href="'+r+"?"+a+"="+t+'"]'))}):ApplyFilters.SetupClass(s(document).find('a[href="'+r+"?"+a+"="+e+'"]'))}),jQuery().selectWoo&&s.each(s("select.woocommerce-widget-layered-nav-dropdown"),function(){var e=s(this);jQuery(e).selectWoo({minimumResultsForSearch:5,width:"100%",language:{noResults:function(){}}})}),"undefined"==typeof woocommerce_price_slider_params&&(e=s(e).find(".et_woocommerce_price_slider_params").html(),s("body").prepend(e)),etTheme.AjaxElement(),s(document).trigger("et_ajax_content_loaded")},error:function(e){etTheme.et_notice("ajax-filters","error")},complete:function(){s(".et-loader.product-ajax").removeClass("loading"),void 0!==etTheme.reinitSwatches&&etTheme.reinitSwatches(),void 0!==etTheme.contentProdImages&&etTheme.contentProdImages(),void 0!==etTheme.countdown&&etTheme.countdown(),s("body").removeClass("swc-default-done"),void 0!==etTheme.widgetsOpenCloseDefault&&etTheme.widgetsOpenCloseDefault(),ApplyFilters.ReinitPriceSlider(),etTheme.resizeVideo(),etTheme.swiperFunc(),etTheme.secondInitSwipers(),etTheme.customCss(),etTheme.customCssOne(),void 0!==etTheme.sidebarCanvas&&etTheme.sidebarCanvas(),void 0!==etTheme.stickySidebar&&etTheme.stickySidebar(),s(document).trigger("yith_wcwl_reload_fragments"),s("body").removeClass("ajax-progress"),etTheme.global_image_lazy(),void 0!==etTheme.widgetsShowMore&&etTheme.widgetsShowMore()}})}},CollectParams:function(){s(document).on("click",".content-page .etheme-ajax-filter, .content-page .etheme_swatches_filter ul li a, .content-page .woocommerce-widget-layered-nav ul li a, .content-page .widget_rating_filter ul li a, .content-page .widget_layered_nav_filters ul li a, .content-page .etheme_widget_brands_filter ul li a",function(e){var t=s(this),n=t.parents("li"),r=!1;if(t.parents("div").hasClass("etheme-active-filters"))"undefined"!=typeof ajaxFilters?(e.preventDefault(),d=l,ajaxFilters.load_data(t.attr("href"),function(){ApplyFilters.ajaxRequest()})):location.href=url;else{e.preventDefault(),t.parents("ul").hasClass("st-swatch-preview")?n.hasClass("selected")?(n.removeClass("selected"),r=!0):n.addClass("selected"):t.parents(".sidebar-widget").hasClass("etheme_widget_brands")?n.hasClass("current-item")?(r=!0,n.removeClass("current-item")):n.addClass("current-item"):n.hasClass("chosen")?(r=!0,n.removeClass("chosen")):n.addClass("chosen");let a=s(this).attr("href"),i=window.location.href;if(!s(this).hasClass("remove-brand")&&!s(this).parents(".widget_layered_nav_filters").hasClass("etheme-active-filters")&&1<i.indexOf("filter_brand")){let e=new URL(i),t=e.searchParams.get("filter_brand");a=a.replace("?","?filter_brand="+t+"&")}n=ApplyFilters.GetUrlParams(a);s.each(n,function(e,t){e&&(r?(l[e]&&(!t||"undefined"==t||""==t)||t==l[e]?delete l[e]:l[e].includes(t)&&(l[e]=l[e].replace(t,"").replace(",,",","),","==l[e].charAt(0)&&(l[e]=l[e].substring(1)),","==l[e].slice(-1)&&(l[e]=l[e].slice(0,-1))),""==l[e]&&delete l[e]):l[e]?l[e].includes(t)||(l[e]+=","+t):l[e]=t)}),Object.keys(l).length?s(document).find(".etheme_apply_all_filters").removeClass("hidden"):s(document).find(".etheme_apply_all_filters").addClass("hidden")}}),s(document).on("price_slider_change",function(){s(".et-reset-price").removeClass("hidden");let e=s(this).find(".etheme-price-filter form").first();var t;!e||e.length<1||!e.hasClass("et-reinited")||(t=e.attr("action")+"?"+e.serialize(),t=ApplyFilters.GetUrlParams(t),s.each(t,function(e,t){"et_ajax"!=e&&"undefined"!=t&&(l[e]=t)}),Object.keys(l).length?s(document).find(".etheme_apply_all_filters").removeClass("hidden"):s(document).find(".etheme_apply_all_filters").addClass("hidden"))}),s(document).on("change",".content-page select.woocommerce-widget-layered-nav-dropdown",function(e){let t=s(this),a=t.attr("class"),i="";a=a.split(" "),s.each(a,function(e,t){t.includes("dropdown_layered_nav_")&&(i=t.replace("dropdown_layered_nav_",""))}),i="filter_"+i,l[i]=t.val(),Object.keys(l).length?s(document).find(".etheme_apply_all_filters").removeClass("hidden"):s(document).find(".etheme_apply_all_filters").addClass("hidden")}),s(document).on("click",".etheme-all-filter",function(e){e.preventDefault();let a=s(this).attr("href");a+="?",s.each(l,function(e,t){a+=e+"="+t+"&"}),"&"==a.slice(-1)&&(a=a.slice(0,-1)),"undefined"!=typeof ajaxFilters?(d=l,ajaxFilters.load_data(a,function(){ApplyFilters.ajaxRequest()})):location.href=a})}},s(document).ready(function(){ApplyFilters.init()})}(jQuery);