var postBackstretch;!function(_,w,$){"use strict";function k(t){return e.hasOwnProperty(t)?t:"cover"}var c=/^.*(youtu\.be\/|youtube\.com\/v\/|youtube\.com\/embed\/|youtube\.com\/watch\?v=|youtube\.com\/watch\?.*\&v=)([^#\&\?]*).*/i;_.fn.backstretch=function(o,a){var n,s=arguments;return 0===_(w).scrollTop()&&w.scrollTo(0,0),this.each(function(t){var e=_(this),i=e.data("backstretch");if(i){if("string"==typeof s[0]&&"function"==typeof i[s[0]]){var r=i[s[0]].apply(i,Array.prototype.slice.call(s,1));return void((r=r===i?$:r)!==$&&((n=n||[])[t]=r))}a=_.extend(i.options,a),"object"==typeof i&&"destroy"in i&&i.destroy(!0)}o&&0!==o.length||((r=e.css("background-image"))&&"none"!==r?o=[{url:e.css("backgroundImage").replace(/url\(|\)|"|'/g,"")}]:_.error("No images were supplied for Backstretch, or element must have a CSS-defined background image.")),i=new h(this,o,a||{}),e.data("backstretch",i)}),n?1===n.length?n[0]:n:this},_.backstretch=function(t,e){return _("body").backstretch(t,e).data("backstretch")},_.expr[":"].backstretch=function(t){return _(t).data("backstretch")!==$},_.fn.backstretch.defaults={duration:5e3,transition:"fade",transitionDuration:0,animateFirst:!0,alignX:.5,alignY:.5,paused:!1,start:0,preload:2,preloadSize:1,resolutionRefreshRate:2500,resolutionChangeRatioThreshold:.1};function g(t){return c.test(t.url)||t.isVideo}var d,r={wrap:{left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},itemWrapper:{position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"100%",height:"100%",zIndex:-999999},item:{position:"absolute",margin:0,padding:0,border:"none",width:"100%",height:"100%",maxWidth:"none"}},T=function(t,e){for(var i,r=t.width(),o=t.height(),a=[],n=function(t,e){return"width"===e?r:"height"===e?o:t},s=0;s<e.length;s++)_.isArray(e[s])?(e[s]=function(t){for(var e=1;e<t.length;e++){for(var i=t[e],r=e;t[r-1]&&parseInt(t[r-1].width,10)>parseInt(i.width,10);)t[r]=t[r-1],--r;t[r]=i}return t}(e[s]),i=function(t,e,i){for(var r,o,a=w.devicePixelRatio||1,n=b(),s=(W(),t<e?"portrait":e<t?"landscape":"square"),c=0,h=0;h<i.length&&((o="string"==typeof(o=i[h])?i[h]={url:o}:o).pixelRatio&&"auto"!==o.pixelRatio&&parseFloat(o.pixelRatio)!==a||o.deviceOrientation&&o.deviceOrientation!==n||o.windowOrientation&&o.windowOrientation!==n||o.orientation&&o.orientation!==s||(c=h,r=t,"auto"===o.pixelRatio&&(t*=a),!(o.width>=r)));h++);return i[Math.min(h,c)]}(r,o,e[s]),a.push(i)):("string"==typeof e[s]&&(e[s]={url:e[s]}),(i=_.extend({},e[s])).url=l(i.url,n),a.push(i));return a},x=(d=[],function t(e,i,r,o,a){if(void 0!==e){_.isArray(e)||(e=[e]),arguments.length<5&&"function"==typeof arguments[arguments.length-1]&&(a=arguments[arguments.length-1]),i="function"!=typeof i&&i?i:0,r="function"==typeof r||!r||r<0?e.length:Math.min(r,e.length),o="function"!=typeof o&&o?o:1,i>=e.length&&(r=i=0),o<0&&(o=r),o=Math.min(o,r);var n=e.slice(i+o,r-o);if(e=e.slice(i,o),r=e.length)for(var s,c=0,h=function(){++c===r&&(p(e,a,!n),t(n,0,0,o,a))},l=0;l<e.length;l++)g(e[l])||((s=new Image).src=e[l].url,(s=function(t){for(var e=0;e<d.length;e++)if(d[e].src===t.src)return d[e];return d.push(t),t}(s)).complete?h():_(s).on("load error",h));else p(e,a,!0)}}),o=function(t){for(var e=[],i=0;i<t.length;i++)"string"==typeof t[i]?e.push({url:t[i]}):_.isArray(t[i])?e.push(o(t[i])):e.push(a(t[i]));return e},a=function(t,e){return(t.centeredX||t.centeredY)&&(w.console&&w.console.log&&w.console.log("jquery.backstretch: `centeredX`/`centeredY` is deprecated, please use `alignX`/`alignY`"),t.centeredX&&(t.alignX=.5),t.centeredY&&(t.alignY=.5)),t.speed!==$&&(w.console&&w.console.log&&w.console.log("jquery.backstretch: `speed` is deprecated, please use `transitionDuration`"),t.transitionDuration=t.speed,t.transition="fade"),t.resolutionChangeRatioTreshold!==$&&(w.console.log("jquery.backstretch: `treshold` is a typo!"),t.resolutionChangeRatioThreshold=t.resolutionChangeRatioTreshold),t.fadeFirst!==$&&(t.animateFirst=t.fadeFirst),t.fade!==$&&(t.transitionDuration=t.fade,t.transition="fade"),t.scale&&(t.scale=k(t.scale)),i(t)},i=function(t,e){return"left"===t.alignX?t.alignX=0:"center"===t.alignX?t.alignX=.5:"right"===t.alignX?t.alignX=1:t.alignX===$&&!e||(t.alignX=parseFloat(t.alignX),isNaN(t.alignX)&&(t.alignX=.5)),"top"===t.alignY?t.alignY=0:"center"===t.alignY?t.alignY=.5:"bottom"===t.alignY?t.alignY=1:t.alignX===$&&!e||(t.alignY=parseFloat(t.alignY),isNaN(t.alignY)&&(t.alignY=.5)),t},e={cover:"cover",fit:"fit","fit-smaller":"fit-smaller",fill:"fill"},h=function(t,e,i){this.options=_.extend({},_.fn.backstretch.defaults,i||{}),this.firstShow=!0,a(this.options,!0),this.images=o(_.isArray(e)?e:[e]),this.options.paused&&(this.paused=!0),this.options.start>=this.images.length&&(this.options.start=this.images.length-1),this.options.start<0&&(this.options.start=0),this.isBody=t===document.body;i=_(w);this.$container=_(t),this.$root=this.isBody?I?i:_(document):this.$container,this.originalImages=this.images,this.images=T(this.options.alwaysTestWindowResolution?i:this.$root,this.originalImages),x(this.images,this.options.start||0,this.options.preload||1);e=this.$container.children(".backstretch").first();this.$wrap=e.length?e:_('<div class="backstretch"></div>').css(this.options.bypassCss?{}:r.wrap).appendTo(this.$container),this.options.bypassCss||(this.isBody||(t=this.$container.css("position"),e=this.$container.css("zIndex"),this.$container.css({position:"static"===t?"relative":t,zIndex:"auto"===e?0:e}),this.$wrap.css({zIndex:-999998})),this.$wrap.css({position:this.isBody&&I?"fixed":"absolute"})),this.index=this.options.start,this.show(this.index),i.on("resize.backstretch",_.proxy(this.resize,this)).on("orientationchange.backstretch",_.proxy(function(){this.isBody&&0===w.pageYOffset&&(w.scrollTo(0,1),this.resize())},this))};function p(t,e,i){"function"==typeof e&&e.call(t,i)}function l(t,e){if("string"==typeof t)t=t.replace(/{{(width|height)}}/g,e);else if(t instanceof Array)for(var i=0;i<t.length;i++)t[i].src?t[i].src=l(t[i].src,e):t[i]=l(t[i],e);return t}h.prototype={resize:function(){try{var t,e=this.options.alwaysTestWindowResolution?_(w):this.$root,i=e.width(),r=e.height(),o=i/(this._lastResizeContainerWidth||0),a=r/(this._lastResizeContainerHeight||0),n=this.options.resolutionChangeRatioThreshold||0;i===this._lastResizeContainerWidth&&r===this._lastResizeContainerHeight||!(Math.abs(o-1)>=n||isNaN(o)||Math.abs(a-1)>=n||isNaN(a))||(this._lastResizeContainerWidth=i,this._lastResizeContainerHeight=r,this.images=T(e,this.originalImages),this.options.preload&&x(this.images,(this.index+1)%this.images.length,this.options.preload),1!==this.images.length||this._currentImage.url===this.images[0].url)||(t=this,clearTimeout(t._selectAnotherResolutionTimeout),t._selectAnotherResolutionTimeout=setTimeout(function(){t.show(0)},this.options.resolutionRefreshRate));var s,c,h,l={left:0,top:0,right:"auto",bottom:"auto"},d=this.isBody?this.$root.width():this.$root.innerWidth(),p=this.isBody?w.innerHeight||this.$root.height():this.$root.innerHeight(),u=this.$itemWrapper.data("width"),g=this.$itemWrapper.data("height"),y=u/g||1,f=(this._currentImage.alignX===$?this.options:this._currentImage).alignX,m=(this._currentImage.alignY===$?this.options:this._currentImage).alignY,v=k(this._currentImage.scale||this.options.scale);"fit"===v||"fit-smaller"===v?(c=g,(d<(h=u)||p<c||"fit-smaller"===v)&&(c=y<(s=d/p)?(h=Math.floor(p*y),p):s<y?(h=d,Math.floor(d/y)):(h=d,p))):c="fill"===v?(h=d,p):(h=Math.max(p*y,d),Math.max(h/y,p)),l.top=-(c-p)*m,l.left=-(h-d)*f,l.width=h,l.height=c,this.options.bypassCss||this.$wrap.css({width:d,height:p}).find(">.backstretch-item").not(".deleteable").each(function(){_(this).find("img,video,iframe").css(l)});var b=_.Event("backstretch.resize",{relatedTarget:this.$container[0]});this.$container.trigger(b,this)}catch(t){}return this},show:function(s,c){if(!(Math.abs(s)>this.images.length-1)){var h=this,l=h.$wrap.find(">.backstretch-item").addClass("deleteable"),d=h.videoWrapper,p={relatedTarget:h.$container[0]};h.$container.trigger(_.Event("backstretch.before",p),[h,s]),this.index=s;var t=h.images[s];clearTimeout(h._cycleTimeout),delete h.videoWrapper;var u=g(t);return u?(h.videoWrapper=new y(t),h.$item=h.videoWrapper.$video.css("pointer-events","none")):h.$item=_("<img />"),h.$itemWrapper=_('<div class="backstretch-item">').append(h.$item),this.options.bypassCss?h.$itemWrapper.css({display:"none"}):(h.$itemWrapper.css(r.itemWrapper),h.$item.css(r.item)),h.$item.bind(u?"canplay":"load",function(t){var e=_(this).parent(),i=e.data("options");c&&(i=_.extend({},i,c));var r=this.naturalWidth||this.videoWidth||this.width,o=this.naturalHeight||this.videoHeight||this.height;e.data("width",r).data("height",o);var a=function(t){return(i[t]!==$?i:h.options)[t]},n=a("transition"),r=a("transitionEasing"),o=a("transitionDuration"),a=function(){d&&(d.stop(),d.destroy()),l.remove(),!h.paused&&1<h.images.length&&h.cycle(),h.options.bypassCss||h.isBody||h.$container.css("background-image","none"),_(["after","show"]).each(function(){h.$container.trigger(_.Event("backstretch."+this,p),[h,s])}),u&&h.videoWrapper.play()};h.firstShow&&!h.options.animateFirst||!o||!n?(e.show(),a()):function(t){var e=t.transition||"fade";(e="string"==typeof e&&-1<e.indexOf("|")?e.split("|"):e)instanceof Array&&(e=e[Math.round(Math.random()*(e.length-1))]);var i=t.new,r=t.old||_([]);switch(e.toString().toLowerCase()){default:case"fade":i.fadeIn({duration:t.duration,complete:t.complete,easing:t.easing||$});break;case"fadeinout":case"fade_in_out":var o=function(){i.fadeIn({duration:t.duration/2,complete:t.complete,easing:t.easing||$})};r.length?r.fadeOut({duration:t.duration/2,complete:o,easing:t.easing||$}):o();break;case"pushleft":case"push_left":case"pushright":case"push_right":case"pushup":case"push_up":case"pushdown":case"push_down":case"coverleft":case"cover_left":case"coverright":case"cover_right":case"coverup":case"cover_up":case"coverdown":case"cover_down":var a=e.match(/^(cover|push)_?(.*)$/),n="left"===a[2]?"right":"right"===a[2]?"left":"down"===a[2]?"top":"up"===a[2]?"bottom":"right",s={display:""},o={};s[n]="-100%",o[n]=0,i.css(s).animate(o,{duration:t.duration,complete:function(){i.css(n,""),t.complete.apply(this,arguments)},easing:t.easing||$}),"push"===a[1]&&r.length&&((a={})[n]="100%",r.animate(a,{duration:t.duration,complete:function(){r.css("display","none")},easing:t.easing||$}))}}({new:e,old:l,transition:n,duration:o,easing:r,complete:a}),h.firstShow=!1,h.resize()}),h.$itemWrapper.appendTo(h.$wrap),h.$item.attr("alt",t.alt||""),h.$itemWrapper.data("options",t),u||h.$item.attr("src",t.url),h._currentImage=t,h}},current:function(){return this.index},next:function(){var t=Array.prototype.slice.call(arguments,0);return t.unshift(this.index<this.images.length-1?this.index+1:0),this.show.apply(this,t)},prev:function(){var t=Array.prototype.slice.call(arguments,0);return t.unshift(0===this.index?this.images.length-1:this.index-1),this.show.apply(this,t)},pause:function(){return this.paused=!0,this.videoWrapper&&this.videoWrapper.pause(),this},resume:function(){return this.paused=!1,this.videoWrapper&&this.videoWrapper.play(),this.cycle(),this},cycle:function(){var t,e,i,r;return 1<this.images.length&&(clearTimeout(this._cycleTimeout),t=this._currentImage&&this._currentImage.duration||this.options.duration,i=function(){this.$item.off(".cycle"),this.paused||this.next()},(e=g(this._currentImage))&&(this._currentImage.loop||(r=0,this.$item.on("playing.cycle",function(){var t=_(this).data("player");clearTimeout(r),r=setTimeout(function(){t.pause(),t.$video.trigger("ended")},1e3*(t.getDuration()-t.getCurrentTime()))}).on("ended.cycle",function(){clearTimeout(r)})),this.$item.on("error.cycle initerror.cycle",_.proxy(i,this))),e&&!this._currentImage.duration?this.$item.on("ended.cycle",_.proxy(i,this)):this._cycleTimeout=setTimeout(_.proxy(i,this),t)),this},destroy:function(t){_(w).off("resize.backstretch orientationchange.backstretch"),this.videoWrapper&&this.videoWrapper.destroy(),clearTimeout(this._cycleTimeout),t||this.$wrap.remove(),this.$container.removeData("backstretch")}};var y=function(){this.init.apply(this,arguments)};y.prototype.init=function(t){function e(){i.$video=o,i.video=o[0]}var i=this,r="video";if(t.url instanceof Array||!c.test(t.url)||(r="youtube"),"youtube"===(i.type=r)){y.loadYoutubeAPI(),i.ytId=t.url.match(c)[2];r="https://www.youtube.com/embed/"+i.ytId+"?rel=0&autoplay=0&showinfo=0&controls=0&modestbranding=1&cc_load_policy=0&disablekb=1&iv_load_policy=3&loop=0&enablejsapi=1&origin="+encodeURIComponent(w.location.origin);i.__ytStartMuted=!!t.mute||t.mute===$,o=_("<iframe />").attr({src_to_load:r}).css({border:0,margin:0,padding:0}).data("player",i),t.loop&&o.on("ended.loop",function(){i.__manuallyStopped||i.play()}),i.ytReady=!1,e(),w.YT&&w.YT.loaded?(i._initYoutube(),o.trigger("initsuccess")):_(w).one("youtube_api_load",function(){i._initYoutube(),o.trigger("initsuccess")})}else{for(var o=_("<video>").prop("autoplay",!1).prop("controls",!1).prop("loop",!!t.loop).prop("muted",!!t.mute||t.mute===$).prop("preload","auto").prop("poster",t.poster||""),a=t.url instanceof Array?t.url:[t.url],n=0;n<a.length;n++){var s=a[n];"string"==typeof s&&(s={src:s}),_("<source>").attr("src",s.src).attr("type",s.type||null).appendTo(o)}o[0].canPlayType&&a.length?o.trigger("initsuccess"):o.trigger("initerror"),e()}},y.prototype._initYoutube=function(){var e=this,i=w.YT;e.$video.attr("src",e.$video.attr("src_to_load")).removeAttr("src_to_load");var t,r=!!e.$video[0].parentNode;r||(t=_("<div>").css("display","none !important").appendTo(document.body),e.$video.appendTo(t));var o=new i.Player(e.video,{events:{onReady:function(){e.__ytStartMuted&&o.mute(),r||(e.$video[0].parentNode===t[0]&&e.$video.detach(),t.remove()),e.ytReady=!0,e._updateYoutubeSize(),e.$video.trigger("canplay")},onStateChange:function(t){switch(t.data){case i.PlayerState.PLAYING:e.$video.trigger("playing");break;case i.PlayerState.ENDED:e.$video.trigger("ended");break;case i.PlayerState.PAUSED:e.$video.trigger("pause");break;case i.PlayerState.BUFFERING:e.$video.trigger("waiting");break;case i.PlayerState.CUED:e.$video.trigger("canplay")}},onPlaybackQualityChange:function(){e._updateYoutubeSize(),e.$video.trigger("resize")},onError:function(t){e.hasError=!0,e.$video.trigger({type:"error",error:t})}}});return e.ytPlayer=o,e},y.prototype._updateYoutubeSize=function(){var t=this;switch(t.ytPlayer.getPlaybackQuality()||"medium"){case"small":t.video.videoWidth=426,t.video.videoHeight=240;break;case"medium":t.video.videoWidth=640,t.video.videoHeight=360;break;default:case"large":t.video.videoWidth=854,t.video.videoHeight=480;break;case"hd720":t.video.videoWidth=1280,t.video.videoHeight=720;break;case"hd1080":t.video.videoWidth=1920,t.video.videoHeight=1080;break;case"highres":t.video.videoWidth=2560,t.video.videoHeight=1440}return t},y.prototype.play=function(){var t=this;return t.__manuallyStopped=!1,"youtube"===t.type?t.ytReady&&(t.$video.trigger("play"),t.ytPlayer.playVideo()):t.video.play(),t},y.prototype.pause=function(){var t=this;return t.__manuallyStopped=!1,"youtube"===t.type?t.ytReady&&t.ytPlayer.pauseVideo():t.video.pause(),t},y.prototype.stop=function(){var t=this;return t.__manuallyStopped=!0,"youtube"===t.type?t.ytReady&&(t.ytPlayer.pauseVideo(),t.ytPlayer.seekTo(0)):(t.video.pause(),t.video.currentTime=0),t},y.prototype.destroy=function(){return this.ytPlayer&&this.ytPlayer.destroy(),this.$video.remove(),this},y.prototype.getCurrentTime=function(t){return"youtube"!==this.type?this.video.currentTime:this.ytReady?this.ytPlayer.getCurrentTime():0},y.prototype.setCurrentTime=function(t){var e=this;return"youtube"===e.type?e.ytReady&&e.ytPlayer.seekTo(t,!0):e.video.currentTime=t,e},y.prototype.getDuration=function(){return"youtube"!==this.type?this.video.duration:this.ytReady?this.ytPlayer.getDuration():0},y.loadYoutubeAPI=function(){w.YT&&w.__yt_load_event_interval__||(w.YT||_("script[src*=www\\.youtube\\.com\\/iframe_api]").length||_('<script type="text/javascript" src="https://www.youtube.com/iframe_api">').appendTo("body"),w.__yt_load_event_interval__=setInterval(function(){w.YT&&w.YT.loaded&&(_(w).trigger("youtube_api_load"),clearTimeout(w.__yt_load_event_interval__),delete w.__yt_load_event_interval__)},50))};var t,n,s,u,f,m,v,b=function(){if("matchMedia"in w){if(w.matchMedia("(orientation: portrait)").matches)return"portrait";if(w.matchMedia("(orientation: landscape)").matches)return"landscape"}return screen.height>screen.width?"portrait":"landscape"},W=function(){return w.innerHeight>w.innerWidth?"portrait":w.innerWidth>w.innerHeight?"landscape":"square"},I=(t=navigator.userAgent,n=navigator.platform,s=t.match(/AppleWebKit\/([0-9]+)/),u=!!s&&s[1],f=t.match(/Fennec\/([0-9]+)/),m=!!f&&f[1],v=t.match(/Opera Mobi\/([0-9]+)/),s=!!v&&v[1],f=!!(f=t.match(/MSIE ([0-9]+)/))&&f[1],!((-1<n.indexOf("iPhone")||-1<n.indexOf("iPad")||-1<n.indexOf("iPod"))&&u&&u<534||w.operamini&&"[object OperaMini]"==={}.toString.call(w.operamini)||v&&s<7458||-1<t.indexOf("Android")&&u&&u<533||m&&m<6||"palmGetResource"in w&&u&&u<534||-1<t.indexOf("MeeGo")&&-1<t.indexOf("NokiaBrowser/8.5.0")||f&&f<=6))}(jQuery,window),function(i){"use strict";postBackstretch={init:function(){this.postBackstretchImg()},postBackstretchImg:function(){let t=i(".post-template-large .wp-picture img, .post-template-large2 .wp-picture img, .content-article .post-gallery-slider img, .post-template-large img, .post-template-large2 img").first(),e=i(".single-post-large");0<t.length&&t.attr("src")&&(t.attr("data-src")?e.backstretch(t.attr("data-src")):e.backstretch(t.attr("src"))),e.length&&i(window).scroll(function(){var t=i(window).scrollTop();i(".single-post-large img").css("transform","translate3d(0px, "+t/1.2+"px, 0px)")})}},i(document).ready(function(){postBackstretch.init()})}(jQuery);