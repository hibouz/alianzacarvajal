var ajaxFilters;!function(j){"use strict";var y;ajaxFilters={init:function(){y={in_progress:!1,categories:!1},"undefined"!=typeof EthemeApplyFilters&&EthemeApplyFilters.is_loaded||this.ajaxFilters()},ajaxFilters:function(){if(etAjaxFiltersConfig.woocommerceSettings.ajax_filters){let e=".content-page .etheme-ajax-filter, .content-page .etheme_swatches_filter ul li a, .content-page .woocommerce-widget-layered-nav ul li a, .content-page .widget_rating_filter ul li a, .content-page .widget_layered_nav_filters ul li a";function t(e){let t="";if(e.hasClass("dropdown_product_brand")){if(t=e.find("option:selected").data("url"),!t)return}else t=e.attr("href");let n=e.parents(".etheme_widget_brands_filter");if(n.hasClass("on_brand")){let a=n.attr("data-shop-url"),i=function(e){let t={},a=document.createElement("a");a.href=e;let i=a.search.substring(1),r=i.split("&");for(let e=0;e<r.length;e++){var n=r[e].split("=");t[n[0]]=decodeURIComponent(n[1])}return t}(t),r=0;a+="?",j.each(i,function(e,t){r++,a=Object.keys(i).length>r?a+e+"="+t+"&":a+e+"="+t}),ajaxFilters.load_data(a)}else ajaxFilters.load_data(t)}etAjaxFiltersConfig.ajax_categories&&(e+=", .content-page .widget_product_categories ul li a"),j(document).on("click",e,function(e){if(e.preventDefault(),!y.in_progress){let a=j(this).attr("href"),i=window.location.href;if(j(this).parents(".sidebar-widget").hasClass("widget_product_categories")&&(y.categories=!0),!j(this).hasClass("remove-brand")&&!j(this).parents(".widget_layered_nav_filters").hasClass("etheme-active-filters")&&1<i.indexOf("filter_brand")){let e=new URL(i),t=e.searchParams.get("filter_brand");a=a.replace("?","?filter_brand="+t+"&")}ajaxFilters.load_data(a)}}),j(document).on("change",".content-page .dropdown_product_brand",function(e){e.preventDefault(),t(j(this))}),j(document).on("click",".content-page .etheme_widget_brands_filter ul li a",function(e){e.preventDefault(),t(j(this))}),j(document).on("click",".content-page .et-reset-price",function(n){if(n.preventDefault(),!y.in_progress){let e=j(this).parents(".etheme-price-filter form"),t=e.find("#min_price"),a=e.find("#max_price"),i=e.find("#min_price").data("min"),r=e.find("#max_price").data("max");t.val(i),a.val(r),j(document.body).trigger("price_slider_slide",[i,r]),j.each(j(".etheme-price-filter .ui-slider-handle"),function(e,t){o(j(t),!(1!=e),!0)}),o(j(".etheme-price-filter .ui-slider-range"),!1,!1);n=e.attr("action")+"?"+e.find("input").not("#min_price, #max_price").serialize();ajaxFilters.load_data(n)}}),j(document).on("price_slider_change",function(){if(j(".et-reset-price").removeClass("hidden"),!y.in_progress){let e=j(this).find(".etheme-price-filter form").first();var t;!e||e.length<1||(t=e.attr("action")+"?"+e.serialize(),ajaxFilters.load_data(t))}}),j(document).on("click",'.content-page .widget_price_filter .button:not(".et-reset-price")',function(e){if(e.preventDefault(),!y.in_progress){let e=j(this).closest("form"),t=e.attr("action"),a=t+"?"+e.serialize();ajaxFilters.load_data(a)}}),j(document).on("change",".content-page select.woocommerce-widget-layered-nav-dropdown",function(n){if(n.preventDefault(),!y.in_progress){let e=j(this),t=window.location.href,a=e.attr("class"),i="",r="";a=a.split(" "),j.each(a,function(e,t){t.includes("dropdown_layered_nav_")&&(i=t.replace("dropdown_layered_nav_",""))}),i="filter_"+i,r=t.includes(i)?(n=e.parents("form").find("input[name="+i+"]").attr("value"),t.replace(i+"="+n,i+"="+e.val())):t.includes("?")?t.replace("?","?"+i+"="+e.val()+"&"):t+"?"+i+"="+e.val(),r&&ajaxFilters.load_data(r)}}),j(document).on("submit",".content-page .woocommerce-ordering",function(e){if(e.preventDefault(),!y.in_progress){let e=j(this),t=e.serializeArray(),a=new URL(window.location.href),i=new URLSearchParams(a.search),r,n;j.each(t,function(e,t){"orderby"==t.name&&(n=t.value)}),i.set("orderby",n),a.search=i.toString(),(r=a.toString())&&ajaxFilters.load_data(r)}}),j(document).on("click",".content-page .view-switcher a",function(e){if(e.preventDefault(),!y.in_progress){let e=j(this).attr("href"),t=j(this).attr("data-type"),a=j(this).parents(".filter-wrap").parent().find(".products-loop");e&&(ajaxFilters.load_data(e),"grid"==t?a.removeClass("products-list").addClass("products-grid"):a.removeClass("products-grid").addClass("products-list"))}}),j(document).on("change",".content-page .et-per-page-select",function(e){if(e.preventDefault(),!y.in_progress){let e=j(this),t=e.parents("form"),a=t.serializeArray(),i=window.location.href;t.attr("action")&&(i=t.attr("action")),i=new URL(i);let r=new URLSearchParams(i.search),n,o="";j.each(a,function(e,t){"et_per_page"==t.name&&(o=t.value)}),r.set("et_per_page",o),i.search=r.toString(),(n=i.toString())&&ajaxFilters.load_data(n)}})}function o(t,a,i){var r=setInterval(function(){var e=parseFloat(t.get(0).style.left);a?100<=e+.3?(t.css("left","100%"),clearInterval(r)):t.css("left",e+.3+"%"):e-.3<=0?(t.css("left",0),clearInterval(r)):t.css("left",e-.3+"%"),i&&function(){let e=j(".etheme-price-filter .ui-slider-range"),t=j(e).get(0).style.width;100<=parseFloat(t)+.3?e.css("width","100%"):e.css("width",parseFloat(t)+.3+"%")}()},1)}etAjaxFiltersConfig.woocommerceSettings.ajax_pagination&&j(document).on("click",".content-page .woocommerce-pagination ul li a",function(e){e.preventDefault(),y.in_progress||ajaxFilters.load_data(j(this).attr("href"))})},reinit_price_filter:function(){if((void 0===y.reinit_price||!y.reinit_price)&&(y.reinit_price=!0,j(".price_slider").length)){if("undefined"==typeof woocommerce_price_slider_params)return!1;j("input#min_price, input#max_price").hide(),j(".price_slider, .price_label").show();let e=j(".price_slider_amount #min_price"),t=j(".price_slider_amount #max_price"),a=e.data("min"),i=t.data("max"),r=parseInt(e.val()?e.val():a,10),n=parseInt(t.val()?t.val():i,10);j(".price_slider").slider({range:!0,animate:!0,min:a,max:i,values:[r,n],create:function(){e.val(r),t.val(n),j(document.body).trigger("price_slider_create",[r,n])},slide:function(e,t){j("input#min_price").val(t.values[0]),j("input#max_price").val(t.values[1]),j(document.body).trigger("price_slider_slide",[t.values[0],t.values[1]])},change:function(e,t){j(document.body).trigger("price_slider_change",[t.values[0],t.values[1]])}})}},load_data:function(e,t){j(".et-loader.product-ajax").addClass("loading"),j("body").addClass("ajax-progress"),y.in_progress=!0,y.reinit_price=!1;let x=e;x=x.replace("?et_ajax=true&","?"),x=x.replace("?et_ajax=true","?"),x=x.replace("et_ajax=true&",""),x=x.replace("et_ajax=true",""),e.includes("?")?e=e.replace("?","?et_ajax=true&"):e+="?et_ajax=true",j.ajax({url:e,method:"GET",timeout:1e5,dataType:"text",beforeSend:function(){j(".sidebar.et-mini-content.active").removeClass("active"),j(".et-toggle-mob-sidebars-wrapper").removeClass("et-content-shown")},success:function(a){let e=j(a).find(".products-loop").html(),t=j(a).find(".sidebar").html(),i=j(a).find(".shop-filters").html(),r=j(a).find(".after-shop-loop").html(),n=j(a).find(".empty-category-block").html(),o=j(a).find(".view-switcher").html(),s=j(a).find(".products-per-page").html(),l=j(a).find(".term-description.et_second-description").html(),c=j(a).find(".term-description:not(.et_second-description)").html(),d=j(".term-description:not(.et_second-description)"),p=j(".category-description"),m=p.length,f=j(a).find(".page-heading").html(),u=j(a).find(".page-heading").attr("style");r&&(r=r.replace("?et_ajax=true","?"),r=r.replace("et_ajax=true",""));let h=j(".content-page .products-loop"),g=j(".content-page .empty-category-block");var _,v,w;if(j("body").hasClass("search-results")&&j(".products-title, .pages-result-slider, .posts-result-slider, .portfolios-result-slider").remove(),n?(h.html(""),g.length?(g.html(n),g.removeClass("hidden")):h.after('<div class="empty-category-block">'+n+"</div>")):(g.html("").addClass("hidden"),h.html(e)),o&&(_=h.attr("data-row-count"),v=j(a).find(".view-switcher").find(".switcher-active > a").attr("data-row-count"),j(".view-switcher").html(o),2<j(a).find(".view-switcher").find(".switch-grid").length&&h.removeClass("row-count-"+_).addClass("row-count-"+v).attr("data-row-count",v)),y.categories&&"inherit"!=etAjaxFiltersConfig.loop_prop_columns_category&&(v=h.attr("data-row-count"),h.removeClass("row-count-"+v).addClass("row-count-"+etAjaxFiltersConfig.loop_prop_columns_category).attr("data-row-count",etAjaxFiltersConfig.loop_prop_columns_category),y.categories=!1),s&&j(".products-per-page").html(s),f&&j(".page-heading").html(f),u?j(".page-heading").attr("style",u):j(".page-heading").attr("style",""),etAjaxFiltersConfig.ajax_categories){if(c){if(!d.length&&!m)switch(etAjaxFiltersConfig.product_page_banner_pos){case 4:j(".content-page").before('<div class="term-description"><div>');break;case 3:j(".content-page").prepend('<div class="term-description"><div>');break;case 1:j(".main-products-loop").prepend('<div class="term-description"><div>');break;default:j(".main-products-loop").append('<div class="term-description"><div>')}m?(p.html(c),reset_builders(etAjaxFiltersConfig.builder,p)):(d.html(c),reset_builders(etAjaxFiltersConfig.builder,d)),etAjaxFiltersConfig.builder.includes("elementor")&&((w=j(a).find("#elementor-frontend-inline-css").html())?j("#elementor-frontend-inline-css").html(w):j.each(j(a).find('[data-elementor-type="wp-post"]'),function(){var e=j(this).attr("data-elementor-id"),t=j(a).find("#elementor-post-"+e+"-css");j("#elementor-post-"+e+"-css").length||j("body").append(t)}))}else m?p.html():d.html("");l?(j(".term-description.et_second-description").length||j(".after-shop-loop").after('<div class=" term-description et_second-description"><div>'),j(".term-description.et_second-description").html(l),reset_builders(etAjaxFiltersConfig.builder,j(".term-description.et_second-description"))):j(".term-description.et_second-description").html("")}j(".fadeIn-slide").each(function(){j(this).addClass("fadedIn-slide"),setTimeout(function(){j(".fadeIn-slide").removeClass("fadedIn-slide").removeClass("fadeIn-slide")},700)}),j(".content-page .sidebar").html(t),j(".content-page .shop-filters").html(i),jQuery().selectWoo&&j.each(j("select.woocommerce-widget-layered-nav-dropdown"),function(){var e=j(this);jQuery(e).selectWoo({minimumResultsForSearch:5,width:"100%",language:{noResults:function(){return etAjaxFiltersConfig.notices.noMatchFound}}})}),"undefined"==typeof woocommerce_price_slider_params&&(w=j(a).find(".et_woocommerce_price_slider_params").html(),j("body").prepend(w)),r?j(".content-page .after-shop-loop").html(r):j(".content-page .after-shop-loop").html(""),etTheme.AjaxElement(),window.history.pushState("","",x),j(document).trigger("et_ajax_content_loaded")},error:function(e){etTheme.et_notice("ajax-filters","error")},complete:function(){if(j(".et-loader.product-ajax").removeClass("loading"),void 0!==etTheme.reinitSwatches&&etTheme.reinitSwatches(),void 0!==etTheme.contentProdImages&&etTheme.contentProdImages(),void 0!==etTheme.countdown&&etTheme.countdown(),j("body").removeClass("swc-default-done"),void 0!==etTheme.widgetsOpenCloseDefault&&etTheme.widgetsOpenCloseDefault(),ajaxFilters.reinit_price_filter(),etTheme.resizeVideo(),etTheme.swiperFunc(),etTheme.secondInitSwipers(),etTheme.customCss(),etTheme.customCssOne(),void 0!==etTheme.sidebarCanvas&&etTheme.sidebarCanvas(),void 0!==etTheme.stickySidebar&&etTheme.stickySidebar(),j(document).trigger("yith_wcwl_reload_fragments"),j("body").removeClass("ajax-progress"),y.in_progress=!1,etTheme.global_image_lazy(),etAjaxFiltersConfig.scroll_top_after_ajax){let e=j(".content-page .main-products-loop > .products-loop").offset().top;j(".content-page .filter-wrap").length&&(e-=j(".content-page .filter-wrap").outerHeight()),e-=110,j("html, body").animate({scrollTop:e},1e3)}void 0!==etTheme.widgetsShowMore&&etTheme.widgetsShowMore(),t&&t()}})}},j(document).ready(function(){ajaxFilters.init()})}(jQuery);